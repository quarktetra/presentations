<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Serkay Ölmez" />
  <meta name="dcterms.date" content="2021-01-07" />
  <meta name="keywords" content="Depop, Weibull Distribution, reliability">
  <title>Modeling Data Durability and Availability</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="presentation_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="presentation_files/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="css\style_presentation.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="presentation_files/htmlwidgets-1.3/htmlwidgets.js"></script>
    <script src="presentation_files/plotly-binding-4.8.0/plotly.js"></script>
    <script src="presentation_files/typedarray-0.1/typedarray.min.js"></script>
    <script src="presentation_files/jquery-1.11.3/jquery.min.js"></script>
    <link href="presentation_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="presentation_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <link href="presentation_files/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="presentation_files/plotly-main-1.39.2/plotly-latest.min.js"></script>
</head>
<body>
<script src="jsfiles/reveal.js-3.3.0.1/js/reveal.js"></script>
<script src="jsfiles/reveal.js-3.3.0.1/lib/js/head.min.js"></script>



<link href="jsfiles/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="jsfiles/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<link href="jsfiles/reveal.js-3.3.0.1/theme/css/fonts/LatoItalic.ttf" />

<link rel="stylesheet" href="css/reveal_mod.css"/>





<link href="css/component-custom-switch.min.css" rel="stylesheet">

 <!--  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">  -->
<link href='https://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet'>



<link rel="stylesheet" href="css/nouislider.min.css"/> 

<!--  <link rel="stylesheet" href="jsfiles/reveal.js-3.3.0.1/css/theme/simple.css" id="theme"> -->






<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    TeX: { equationNumbers: { autoNumber: "AMS" } },
  });
</script>
  <div class="reveal">
    <div class="slides">

<section data-background-image="TR2.png" data-state="introbg" >
    <h1 class="title">Modeling Data Durability and Availability</h1>
    <div class="author" style="margin-top:50px">Serkay Ölmez</div>
    <div class="date">January 7, 2021</div>
</section>

<section id="introslide" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg"><h1>Outline</h1><div id="emailtext" class="myclassifier_Presentation" style=" font-size: 14px;margin-bottom:20px">
<a href="mailto:serkay.olmez@seagate.com" class="email">serkay.olmez@seagate.com</a>
</div>
<div id="acknowledgementtext">
<p class="center" style="margin-bottom:-2px">
Acknowledgements:
</p>
<p class="center" style="margin-top:-2px">
Ian Davies, Mike Barrell, John Bent, and Iman Anvari
</p>
<p><IMG SRC="seagate_once.gif" id="seagategif"  class="plain"></p>
</div>
<div id="infotextcont" class="myclassifier_Presentation">
<div class="m_button" style="margin-top:80px;">
<span></span> <span></span> <span></span>
</div>
<div id="infotext">
<div class="mylist">
<ul>
<li>
Press <span class="blink" style="color:orange;"><b>F11</b> </span>for full screen
</li>
<li>
Ctrl +/- to fit the content into the browser
</li>
<li>
Use arrow keys to navigate the slides
</li>
<li>
Table of contents button on the left bottom
</li>
<li>
  Printable PDF:
  <div class="regulartooltip topline">
  <a href='./presentation.pdf'><i class='far fa-file-pdf' style='color:red;'></i></a> <span class="regulartooltiptext"> This is a static copy of the presentation. </span>
  </div>
  </li>
  <li>Recorded session: <div class='regulartooltip topline'> <a href="#" onclick='window.open("https://www.youtube.com/watch?v=gsp4fUP0I30");return false;'><i class='fab fa-youtube' style='color:red;'></i></a> <span class='regulartooltiptext'> Recorded on Jan 7, 2021. </span></div></li>
<li>
<div id="specialrefs" class="myclassifier_Highlights_Detailed_Advanced_Presentation">
Complied with BookDown <span class="citation" data-cites="xie2015">[<a href="#/ref-xie2015" role="doc-biblioref">1</a>]</span> and Revealjs <span class="citation" data-cites="revealjs">[<a href="#/ref-revealjs" role="doc-biblioref">2</a>]</span>
</div>
</li>
<li>
<div class="regulartooltip topline">
Fragments:<span class="regulartooltiptext"> Enable or disable fragment transitions within slides </span>
</div>
<div class="custom-switch custom-switch-label-onoff custom-switch-xs pl-0" style="margin-top:-10px;margin-bottom:-10px;display:inline-block">
<p><input  class="custom-switch-input" id="fragment_button" type="checkbox" checked> <label class="custom-switch-btn" style="display:inline-block;margin-top:-10px;margin-bottom:-8px" for="fragment_button"></label></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">

<ul>
<li>
Modeling Failures
<ul>
<li class="fragment">
<font color="gray"> Weibull Distribution </font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Erasure Coding(EC)
<ul>
<li class="fragment">
<font color="gray"> General formalism,
<div class="regulartooltip topline">
RAID <span class="regulartooltiptext"> Redundant Array of Inexpensive Disks </span>
</div>
5&amp; 6</font></font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Hard Errors (
<div class="regulartooltip topline">
UREs <span class="regulartooltiptext"> UnRecoverable Errors</span>
</div>
)
<ul>
<li class="fragment">
<font color="gray"> Modeling durability with UREs</font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Distributed Parity
<ul>
<li class="fragment">
<font color="gray"> Improving data durability with
<div class="regulartooltip topline">
ADAPT <span class="regulartooltiptext"> Autonomic Distributed Allocation Protection Technology </span> </font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Multi-Layer EC
<ul>
<li class="fragment">
<font color="gray"> Improving durability with two layers of EC</font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Availability
<ul>
<li class="fragment">
<font color="gray"> Modeling data availability </font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Appendix
<ul>
<li class="fragment">
<font color="gray">
<div class="regulartooltip topline">
MACH2 <span class="regulartooltiptext"> Exos® 2X14, Seagate’s Dual actuator drive</span>
</div>
and
<div class="regulartooltip topline">
ReMan<span class="regulartooltiptext"> ReManufacturing drives with head failures</span>
</div>
</font>
</li>
</ul>
</li>
</ul>
<div class="my_vspacer">

</div>
</div></section>
<section id="highelevelslide" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg"><h1>Goals &amp; Summary</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="insidetitle">
Goals
</div>
<ul>
<li class="fragment">
Provide a quick review of available models to compute data durability,
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Present an accurate and rigorous model,
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Establish a common language to compute these metrics.
</li>
</ul>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="insidetitle">
Summary
</div>
<div class="collapsible_container fragment" style="margin-bottom:20px;">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:20px">
A quick survey on literature
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-34px;margin-bottom:-8px">
Hide
</button>
<div class="experience__more sourceCode r" style=";margin-top:10px;">
<p>The durability of data in storage systems is determined by physical device failure rates. A typical storage system has multiple storage devices, which significantly increases the likelihood of failures. In order to improve the reliability, data redundancy is added to the system so that it becomes possible to recover data on a failed storage device from the parities stored on the remaining healthy devices. For example, in the case of Redundant Array of Inexpensive Disks (RAID), adding one redundancy ensures data robustness to one failure, whereas adding two redundancies will provide robustness against two simultaneous failures<span class="citation" data-cites="raid">[<a href="#/ref-raid" role="doc-biblioref">3</a>]</span>. The data durability can be further increased by implementing sophisticated erasure coding schemes<span class="citation" data-cites="Hellerstein1994 Dimakis Wang Iliadis Thomasian">[<a href="#/ref-Hellerstein1994" role="doc-biblioref">4</a>]–[<a href="#/ref-Thomasian" role="doc-biblioref">8</a>]</span> and also by prioritizing the recovery of critically damaged data stripes<span class="citation" data-cites="draid">[<a href="#/ref-draid" role="doc-biblioref">9</a>]</span>. In all of these schemes, the durability critically depends on how fast the data on a failed device can be reconstructed to restore the redundancy.</p>
</div>
<ul>
<li class="fragment">
The durability and availability of data can be predicted accurately with Markov Chains:
<ul>
<li class="fragment">
<font color="gray"> Based on rigorous math, and verified with Monte Carlo simulations.
</li>
</font>
<li class="fragment">
<font color="gray"> Supports Distributed Parity, ReMan, UREs, Weibull failure modes, and multi-layer EC.
</li>
</font>
<li class="fragment">
<font color="gray"> Developed in collaboration with the CORTX architects &amp; sales team.
</li>
</font>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Advanced features, such as Online ReMan, can be modeled too:
<ul>
<li class="fragment">
<font color="gray"> We continue to work on modeling latest and greatest CORTX features.</font>
</li>
</ul>
</li>
<div class="my_vspacer">

</div>
</ul>
</div>
<!-- bunch of utility JS  -->
<script> var statemap=[true,"legendonly"]   </script>
<script type="text/javascript" src="jsfiles/loader.js"></script>
<p><!-- google charts --></p>
<script src="./jsfiles/math602.js"></script>
<script src="./jsfiles/vis.js"></script>
<script src="./jsfiles/jquery-1.11.3/jquery.min.js"></script>
<script src="./jsfiles/nouislider.min.js"></script>
<script src="./jsfiles/wNumb.js"></script>
<p><link rel="stylesheet" href="./css/nouislider.min.css"/></p>
<script src="./jsfiles/htmlwidgets-1.3/htmlwidgets.js"></script>
<p><link href="./jsfiles/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" /></p>
<script src="./jsfiles/d3.v4.min.js"></script>
<script src="./jsfiles/venn.js"></script>
<script src="./jsfiles/plotly-latest.min.js"></script>
<script>

function addClassNameListener(elemId, callback) {
    var elem = document.getElementById(elemId);
    var lastClassName = elem.className;
    window.setInterval( function() {   
       var className = elem.className;
        if (className !== lastClassName) {
            callback();   
            lastClassName = className;
        }
    },500);
}

function addIdListener(elem, callback) {
    var lastClassName = elem.className;
    window.setInterval( function() {   
       var className = elem.className;
        if (className !== lastClassName) {
            callback();   
            lastClassName = className;
        }
    },10);
}

</script>
<script id="rendered-js">
    $(document).ready(function () {
        $(".js--btn-more").click(function () {
        $(this).parent().find('.experience__more').toggleClass("is--expanded");
        $(this).toggleClass("is--visible");
        $(this).next().toggleClass("is--visible");
    
        });
        $(".js--btn-less").click(function () {
        $(this).parent().find('.experience__more').toggleClass("is--expanded");
        $(this).toggleClass("is--visible");
        this.previousElementSibling.classList.add("is--visible");

        });
        
    });
</script>
<script type="text/javascript">
function insertAfter(el, referenceNode) { referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling); }
function cap_expander(){
      var thistyled=this.parentNode.getElementsByClassName("expanded-caption")[0].style.display
      //alert(this.parentNode.innerHTML)
       if(thistyled== "inline"){
          this.parentNode.getElementsByClassName("expanded-caption")[0].style.display="none"
          this.innerHTML = "... [+]"
       }else{
            this.parentNode.getElementsByClassName("expanded-caption")[0].style.display="inline"
            this.innerHTML = " [-]"
           insertAfter(this, this.parentNode.getElementsByClassName("expanded-caption")[0]);
         }
      }
      
</script>
<script type="text/javascript">
function vdraw(divid,nparity_raid_study,mode,distin,uermode,shapein) {
var nodes = []; var edges = [];
     var network = null;
     var i;
     var dist=0
     var sizer

     for (i = 0; i < nparity_raid_study+2; i++) 
     {  
     sizer=80
     dist=dist+Math.pow(i, 0.35)*150
       var nlabel
       var ncolor
      if(i==nparity_raid_study){ncolor="pink"}
      if(nparity_raid_study==2&i==1){ncolor="orange"}
     nlabel=" ".concat(i.toString()).concat(" ")

     //if(i==0){nlabel="  n  "; ncolor="green"}else{nlabel="n-".concat((i).toString())}
      if(i==nparity_raid_study+1){nlabel=" F "; ncolor="red"}
      
    var ypos=0
    if(i==nparity_raid_study+1&uermode=="uer"){ypos=-50}else{ypos=0}
     nodes.push({id: i, shape: shapein,x:dist,y:ypos,size:sizer, label:nlabel,
     color: {
        background: ncolor,
        border: '#000000',
        highlight: {
        border: '#2B7CE9',
        background: '#D2E5FF'
        }
        },
         font: {
      color: 'blue',
      face: 'arial',
      background: 'none',
      strokeWidth: 0, // px
      strokeColor: '#ffffff',
      align: 'center',
      multi: false,
      vadjust: -0,
      
    }})
     var roundval=0.5
     var thislabel
     var rlabel
     rlabel="μ"
     if(i==3&mode=="p"){rlabel="2μ"}
     if(distin=="draid"){rlabel="μ".concat((i-1).toString())}
     if(uermode=="uer"&i==nparity_raid_study+1){rlabel="μ(1-h)"}

     if(i==0){thislabel="nλ"}else{thislabel="(n-".concat((i).toString().concat(")λ"))}
      if(distin=="draid"){if(i==0){thislabel="Dλ"}else{thislabel="(D-".concat((i).toString().concat(")λ"))}}
     if(i==nparity_raid_study&uermode=="nouer"& shapein!="box"){roundval=0}
        edges.push( {from: i, to: i+1,arrows:"middle",smooth: {type: "curvedCW", roundness: roundval},label:thislabel, 
                color: {color:'red'},font: {color: '#343434',size: 20,background: 'none',vadjust:15},width:3 });
        edges.push( {from: i-1, to: i-2,arrows:"middle",smooth: {type: "curvedCW", roundness: 0.5},label:rlabel, 
                      color: {color:'green'},font: {color: '#343434',size: 20,background: 'none',vadjust:-15},width:3 })  
    };

      var container = document.getElementById(divid);
      var data = {nodes: nodes, edges: edges};
      var options = {nodes: {size:40,font:{color:'#eeeeee', "size": 30}},
                     physics: false,
                      interaction: {
                          dragNodes: false,// do not allow dragging nodes
                          zoomView: false, // do not allow zooming
                          dragView: false  // do not allow dragging
                      }
      };
      
      if(uermode=="uer"){
     nodes.push({id: nparity_raid_study+3, shape: shapein,x:dist,y:50,size:sizer, label:"uF",
     color: {
        background: 'red',
        border: '#000000',
        highlight: {
        border: '#2B7CE9',
        background: '#D2E5FF'
        }
        },
         font: {
      color: 'blue',
      face: 'arial',
      background: 'none',
      strokeWidth: 0, // px
      strokeColor: '#ffffff',
      align: 'center',
      multi: false,
      vadjust: -0,
      
    }})
    
        edges.push( {from: nparity_raid_study, to: nparity_raid_study+3,arrows:"middle",smooth: {type: "curvedCCW", roundness: 0.5},label:'hμ', 
                color: {color:'red'},font: {color: '#343434',size: 20,background: 'none',vadjust:-15} ,width:3});
    
      }
       if(shapein=="box"){
              edges.push( {from: nparity_raid_study+1, to: nparity_raid_study,arrows:"middle",smooth: {type: "curvedCW", roundness: 0.5},label:'μ', 
                color: {color:'green'},font: {color: '#343434',size: 20,background: 'none',vadjust:-15} ,width:3});
    
       }
      network = new vis.Network(container, data, options);
}
</script>
<script type="text/javascript">
    window.MathJax = {
      extensions: ["tex2jax.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js", "action.js"]
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    };
</script>
<style>


  .mathjax-tooltip {
  display: none;
  width: 100%;
  position: absolute;
  background-color:gray;
}


</style>
<!--chapter:end:index.RMD--></section>
<section><section id="modelingcomp" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg"><h1>Modeling component failures</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
We will assume that individual component failures can be described by a Weibull distribution <span class="citation" data-cites="Padgett">[<a href="#/ref-Padgett" role="doc-biblioref">10</a>]</span>.
<div class="myclassifier_Detailed_Advanced">
It has two parameters: <span class="math inline">\(\alpha\)</span> parameter sets the time scale whereas the shape parameter <span class="math inline">\(\beta\)</span> sets the shape of the distribution.
</div>
The failure probability density, cumulative failure distributions and the hazard rate (failure rate) are defined as follows:
<div class="fragment">
<p><span class="math display">\[\begin{equation}  
f_{\alpha,\beta}(t)=\frac{\beta }{\alpha} \left( \frac{t}{\alpha}\right)^{\beta -1} e^{-\left( \frac{t}{\alpha}\right)^{\beta}},(\#eq:weipdf)
\end{equation}\]</span> <span class="math display">\[\begin{equation}  
F_{\alpha,\beta}(t)= \int_{0}^{t} d\tau f_{\alpha,\beta}(\tau)=1-e^{-\left(\frac{t}{\alpha}\right)^{\beta}},(\#eq:weicdf)  
\end{equation}\]</span> <span class="math display">\[\begin{equation}  
h_{\alpha,\beta}(t)= \frac{f_{\alpha,\beta}(t)}{1-F_{\alpha,\beta}(t)}=\frac{\beta }{\alpha} \left( \frac{t}{\alpha}\right)^{\beta -1}.(\#eq:weihazard)
\end{equation}\]</span></p>
</div>
<div class="myclassifier_Detailed_Advanced">
<p>The hazard rate function, <span class="math inline">\(h_{\alpha,\beta}(t)\)</span>, is the event rate normalized with respect the to the population that survived until <span class="math inline">\(t\)</span>.</p>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment">
The actual values of <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> vary from product to product: <span class="math inline">\(\beta\)</span> is expected to be between <span class="math inline">\(1\)</span> and <span class="math inline">\(2\)</span>.
<div class="myclassifier_Detailed_Advanced">
When <span class="math inline">\(\beta\neq1\)</span>, the failure rates are time dependent and data durability calculations involve differential equations with time dependent coefficients.
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<p><span class="math inline">\(\beta=1\)</span> gives the exponential distribution, which has completely random head failure times with a fixed failure(hazard) rate: <span class="math inline">\(h_{\alpha,\beta}(t)=\frac{1}{\alpha}\equiv\lambda\)</span>. This simplifies Eqs. <span class="myeqref"> @ref(eq:weipdf) </span>,<span class="myeqref"> @ref(eq:weicdf) </span> and <span class="myeqref"> @ref(eq:weihazard) </span> to: <span class="math display">\[\begin{equation}  
f_{\lambda}(t)= \lambda e^{-\lambda t},\quad F_{\lambda}(t)=1-e^{-\lambda t},\, \rm{and}\quad h_{\lambda}(t)=\lambda.    (\#eq:expfuncs)
\end{equation}\]</span></p>
</div></section><section id="wvisualslide" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg">
<h2>Visualizing failure distributions</h2>
<div class="myclassifier_Highlights_Detailed_Advanced">
In the interactive plot below, <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> values can be adjusted. The toggles on the right change the scales.
</div>
<div id="weibull_hazard_cont" class="fragment pbox">
<div class="boxer" style="margin-top:10px">
<div style="display: inline-block;width:35%;margin-left:3%;">
<div id="slider-beta" class="regular-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
<span class="math inline">\(\beta\)</span>
</div>
</div>
<div style="display: inline-block;width:35%;margin-left:2%;">
<div id="slider-alpha" class="regular-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
<span class="math inline">\(\alpha\)</span> (hours)
</div>
</div>
<div style="display: inline-block;width:6%;margin-left:2%; ;">
<div id="slider-toggle_xaxis" class="toggle-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
x:lin/log
</div>
</div>
<div style="display: inline-block;width:6% ;margin-left:2%;">
<div id="slider-toggle_yaxis" class="toggle-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
y:lin/prob
</div>
</div>
<div id="weibull_pdf" style="display: inline-block;width:32%;margin-left:auto;margin-right:auto;margin-top:-1px;">

</div>
<div id="weibull_cdf" style="display: inline-block;width:32%;;margin-left:auto;margin-right:auto;margin-top:-1px;">

</div>
<div id="weibull_hazard" style="display: inline-block;width:32%;margin-left:5px;margin-right:auto;margin-top:-1px;">

</div>
</div>
<div style="margin-top:-8px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="An interactive plot of Weibull distributions defined in  Eqs.&lt;span class='myeqref'&gt; \@ref(eq:weipdf) &lt;/span&gt;,&lt;span class='myeqref'&gt; \@ref(eq:weicdf) &lt;/span&gt; and  &lt;span class='myeqref'&gt;\@ref(eq:weihazard)&lt;/span&gt;. Use the toggles for linear/log scales. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; The vertical dashed lines mark the value $t=\alpha$, and the horizontal one on $F$ marks the value $0.63$. The $y$ axis can be transformed to $ln\left[-ln(1-F_{\alpha,\beta})\right]$, and  the time axis  can be transformed to $ln(t)$.   The effect of $\beta$ on $F$ is best observed with  the log time scale, and $y$ in the probability scale: notice how $F_{\alpha,\beta}$ becomes a line with the slope $\beta$. Selecting the log scale for time and linear scale for the $y$ axis, shows that the changing scale parameter $\alpha$ moves the functions horizontally while preserving their shapes.&lt;/span&gt;" width="0.01%" />
<p class="caption">
An interactive plot of Weibull distributions defined in Eqs.<span class="myeqref"> @ref(eq:weipdf) </span>,<span class="myeqref"> @ref(eq:weicdf) </span> and <span class="myeqref">@ref(eq:weihazard)</span>. Use the toggles for linear/log scales. <span class="plus">… [+]</span> <span class="expanded-caption"> The vertical dashed lines mark the value <span class="math inline">\(t=\alpha\)</span>, and the horizontal one on <span class="math inline">\(F\)</span> marks the value <span class="math inline">\(0.63\)</span>. The <span class="math inline">\(y\)</span> axis can be transformed to <span class="math inline">\(ln\left[-ln(1-F_{\alpha,\beta})\right]\)</span>, and the time axis can be transformed to <span class="math inline">\(ln(t)\)</span>. The effect of <span class="math inline">\(\beta\)</span> on <span class="math inline">\(F\)</span> is best observed with the log time scale, and <span class="math inline">\(y\)</span> in the probability scale: notice how <span class="math inline">\(F_{\alpha,\beta}\)</span> becomes a line with the slope <span class="math inline">\(\beta\)</span>. Selecting the log scale for time and linear scale for the <span class="math inline">\(y\)</span> axis, shows that the changing scale parameter <span class="math inline">\(\alpha\)</span> moves the functions horizontally while preserving their shapes.</span>
</p>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced">
<p>A drive will contain <span class="math inline">\(N\)</span> heads and other components. We will model the drive as a device with two competing failure modes, one of which is ReMan’able while the other is not.</p>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
It is important to understand how the storage devices fail. Weibull is typically a good fit.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
No matter how reliable individual devices are, failures are inevitable.
</li>
</ul>
</div>
<script>
function w_pdf_cdf_plotter(){
  var w_pdf_cdf_plotter_default_state=[0,0]
  toggle_yaxis=toggle_yaxisSlider.noUiSlider.get()
  var typery="lin";   if( toggle_yaxis==1){typery="log"}
  
  toggle_xaxis=toggle_xaxisSlider.noUiSlider.get()
  var typerx="lin";   if( toggle_xaxis==1){typerx="log"}
  
  var weibull_pdf_cdf_traces=document.getElementById('weibull_pdf').getElementsByClassName("traces")
  if(weibull_pdf_cdf_traces.length>0){
    for (i = 0; i < weibull_pdf_cdf_traces.length;i++)
    {if(weibull_pdf_cdf_traces[i].style.opacity<1){w_pdf_cdf_plotter_default_state[i]=1}else{w_pdf_cdf_plotter_default_state[i]=0}} 
  } 
  
  beta=betaSlider.noUiSlider.get()
  var xmax=10000
  alpha=alphaSlider.noUiSlider.get()
  const w_t_values= math.range(10,xmax, 10).toArray()
  const scalar=math.exp(-1)
  
  var xmax_cdf=alpha* math.pow(1-scalar,-1/(2*beta* scalar))
  //console.log("xmax_cdf="+xmax_cdf)
  //console.log("alpha/xmax_cdf="+alpha/xmax_cdf)
  const w_t_values_cdf= math.range(10,xmax_cdf, 10).toArray()

  var w_pdf_values = w_t_values.map(x => beta/alpha* Math.pow(x/alpha, beta-1)*Math.exp(-Math.pow(x/alpha, beta)))
  var w_hazard_values = w_t_values.map(x => beta/alpha* Math.pow(x/alpha, beta-1))

  //var w_cdf_values = w_t_values.map(x =>100-100* Math.exp(-Math.pow(x/alpha, beta)))

  var w_t_values_log= w_t_values.map(x =>Math.log(x))
  var w_cdf_values = w_t_values.map(x =>1-1* Math.exp(-Math.pow(x/alpha, beta)))
 
 
   w_cdf_values_log = w_t_values_cdf.map(x =>(1-scalar)* math.pow(x/alpha,2*scalar*beta))
   w_cdf_values_log_text = w_t_values.map(x =>(math.round(100*(1-1* Math.exp(-Math.pow(x/alpha, beta))))/100).toString())



  w_pdf_trace={line:{width: 5},mode:'lines',name:'PDF',type:'scatter',x: w_t_values,y:w_pdf_values,fill:'tozeroy'};
  w_hazard_trace={line:{width: 5},mode:'lines',name:'PDF',type:'scatter',x: w_t_values,y:w_hazard_values,fill:'tozeroy'};

  w_cdf_trace={line:{width: 5},mode:'lines',name:'CDF',type:'scatter',x: w_t_values,y: w_cdf_values};//,fill:'tozeroy',yaxis:'y2'
  
  w_cdf_trace_log={line:{width: 5},mode:'lines',name:'CDF',type:'scatter',x: w_t_values,y: w_cdf_values_log,text:w_cdf_values_log_text,hoverinfo:"text+x"};//,fill:'tozeroy',yaxis:'y2'

  var logxmax= xmax
  var vline_cdf= alpha/xmax
  var vline_pdf= alpha/xmax
 if( toggle_xaxis==1){
 logxmax=math.log10(xmax_cdf)
 vline_pdf=(math.log10(alpha)-1)/(math.log10(xmax)-1)
 if( toggle_yaxis==1){vline_cdf= math.log(alpha)/math.log(xmax_cdf)
 
 }else{vline_cdf=(math.log10(alpha)-1)/(math.log10(xmax)-1) }
 }

  lg={x: 0.35,y: 1.1,
      traceorder: 'normal',
      font: {family: 'sans-serif',size: 16,color: '#000' },
      bgcolor: '#E2E2E2', bordercolor: '#FFFFFF', borderwidth: 2, "orientation": "h"
     }
     
  var layout_pdf = {
   legend:lg,
    xaxis: {title: 'Time(hours)',  showgrid: true,  zeroline: false,titlefont: {size:16},tickfont: {size:12}, type: typerx}, //
    yaxis: {hoverformat: '.2r',title: '$\\text{Failure density distribution}:f_{\\alpha,\\beta}$',showline: true,titlefont: {size:16},tickfont: {size:12},  side: 'left', type: typery},
    margin: {    l: 65,    r: 50,    b: 40,    t: 40,    pad: 1  },
      shapes: [
        {
        type: 'line',
        xref: 'paper',
        x0: vline_pdf,
        y0: 0,
        x1: vline_pdf,
        y1: beta/alpha*Math.exp(-1),
        line:{
            color: 'gray',// rgb(255, 0, 0)
            width: 2,
            dash:'dot'
        }
    }
    ]

  };
  
  var layout_hazard = {
   legend:lg,
    xaxis: {title: 'Time(hours)',  showgrid: true,  zeroline: false,titlefont: {size:16},tickfont: {size:12}, type: typerx}, //
    yaxis: {hoverformat: '.2r',title: '$\\text{Hazard rate}:h_{\\alpha,\\beta}$',showline: true,titlefont: {size:16},tickfont: {size:12},  side: 'left'},
    yaxis2: { hoverformat: '.2r',title: 'Cumulative Failure Rate(%)',overlaying: 'y',    side: 'left',titlefont: {size:16},tickfont: {size:12}  },
    margin: {    l: 65,    r: 50,    b: 40,    t: 40,    pad: 1  },
             shapes: [{type: 'line',xref: 'paper', x0: vline_pdf,y0: 0,x1: vline_pdf,y1: beta/alpha,
                    line:{color: 'gray',width: 2, dash:'dot'}
                    }]

  };
  
  
   var data = [w_pdf_trace]

  Plotly.newPlot('weibull_pdf', data,layout_pdf, {displayModeBar: true}); 
  

 //console.log("vline_cdf:"+vline_cdf)
  var layout_cdf_log = {
   legend:lg,
    xaxis: {title: 'Time(hours)',  showgrid: true,  zeroline: false,titlefont: {size:16},tickfont: {size:12}, type: typerx,range:[0,logxmax]}, //
    yaxis: {hoverformat: '.2r',title: '$\\text{Failure cumulative distribution}:F_{\\alpha,\\beta}$',showline: true,titlefont: {size:16},tickfont: {size:12},  side: 'left', type: 'log',range:[-3,0],
    tickmode: "array", // If "array", the placement of the ticks is set via `tickvals` and the tick text is `ticktext`.
     tickvals: [0.001,0.002,0.005, 0.01,0.02,0.05, 0.1,0.2,0.5, 1],
     ticktext: ['0.001','0.002','0.005', '0.01','0.02','0.05', '0.1','0.2','0.5', '1']
    },
     margin: {    l: 65,    r: 50,    b: 40,    t: 40,    pad: 1  },
  shapes: [
    { type: 'line', xref: 'paper',x0: 0,y0: 0.63,  x1: 1,  y1: 0.63,
        line:{color: 'gray',  width: 2,   dash:'dot'}
    },
        {
        type: 'line', xref: 'paper',
        x0: vline_cdf,  y0: 0, x1: vline_cdf,  y1: 1,
        line:{color: 'gray',width: 2,  dash:'dot' }
    }
    ]
    
  };
    
    var layout_cdf = {
   legend:lg,
    xaxis: {title: 'Time(hours)',  showgrid: true,  zeroline: false,titlefont: {size:16},tickfont: {size:12}, type: typerx}, //
    yaxis: {hoverformat: '.3r',title: '$\\text{Failure cumulative distribution}:F_{\\alpha,\\beta}$',showline: true,titlefont: {size:16},tickfont: {size:12},  side: 'left'},
    margin: {    l: 65,    r: 50,    b: 40,    t: 40,    pad: 1  },
  shapes: [
    {
        type: 'line',
        xref: 'paper',
        x0: 0,
        y0: 0.63,
        x1: 1,
        y1: 0.63,
        line:{
            color: 'gray',
            width: 2,
            dash:'dot'
        }
    },
        {
        type: 'line',
        xref: 'paper',
        x0: vline_cdf,
        y0: 0,
        x1: vline_cdf,
        y1: 1,
        line:{
            color: 'gray',// rgb(255, 0, 0)
            width: 2,
            dash:'dot'
        }
    }
    ]
    
  };
 if( toggle_yaxis==1){
 data = [w_cdf_trace_log]
 Plotly.newPlot('weibull_cdf', data,layout_cdf_log, {displayModeBar: true});
 }else{
 data = [w_cdf_trace]
 Plotly.newPlot('weibull_cdf', data,layout_cdf, {displayModeBar: true});
 }
  
   data = [w_hazard_trace]
  Plotly.newPlot('weibull_hazard', data,layout_hazard, {displayModeBar: true});
 




  

}      
</script>
<script>
var betaSlider = document.getElementById('slider-beta');
noUiSlider.create(betaSlider, {
  start: [1.0], margin: 0.1,tooltips: [wNumb({decimals: 1})], step:0.1,range: {min: 0.5, max: 3}
})

var alphaSlider = document.getElementById('slider-alpha');
noUiSlider.create(alphaSlider, {
  start: [1000], margin: 500,tooltips: [wNumb({decimals: 0})],step: 50,range: {min: 500, max: 4500}
})

var toggle_xaxisSlider = document.getElementById('slider-toggle_xaxis');
noUiSlider.create(toggle_xaxisSlider, { orientation: "horizontal",
    start: 0,    range: {        'min': [0, 1],        'max': 1    },    format: wNumb({        decimals: 0    })
});

var toggle_yaxisSlider = document.getElementById('slider-toggle_yaxis');
noUiSlider.create(toggle_yaxisSlider, { orientation: "horizontal",
    start: 0,    range: {        'min': [0, 1],        'max': 1    },    format: wNumb({        decimals: 0    })
});


w_pdf_cdf_plotter()
betaSlider.noUiSlider.on('update', function( values, handle ) { w_pdf_cdf_plotter()});
alphaSlider.noUiSlider.on('update', function( values, handle ) { w_pdf_cdf_plotter()});
toggle_yaxisSlider.noUiSlider.on('update', function (values, handle) {w_pdf_cdf_plotter()});
toggle_xaxisSlider.noUiSlider.on('update', function (values, handle) {w_pdf_cdf_plotter()});




</script>
<!--chapter:end:weibull.Rmd-->
</section></section>
<section><section id="erasurecoding" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>Erasure Coding</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation pbox fragment">
<div class="imgcont fragmentw" style="margin-top:5px;;margin-bottom:35px;padding-bottom:1px;padding-top:5px;width:60%; display:inline-block; margin-left:25%">
<div class="figure" style="text-align: center">
<img src="cortx.png" alt="A brief timeline of the erasure coding. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt;  Replication has very poor capacity efficieny. RAID5(6) provides protection against one(two) failure(s). Seagate enclosures can be used to declustered parity as well as  erasure coding across network. Durability and availablity can be further improved by implementing Multi-layer erasure coding. Most of the method shown in this figure will be discussed in detail in this presentation. &lt;/span&gt; Credit:John Bent" width="100%" />
<p class="caption">
A brief timeline of the erasure coding. <span class="plus">… [+]</span> <span class="expanded-caption"> Replication has very poor capacity efficieny. RAID5(6) provides protection against one(two) failure(s). Seagate enclosures can be used to declustered parity as well as erasure coding across network. Durability and availablity can be further improved by implementing Multi-layer erasure coding. Most of the method shown in this figure will be discussed in detail in this presentation. </span> Credit:John Bent
</p>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation pbox fragment">
<ul>
<li>
The simplest way of creating redundancy is replication, but this has a very poor capacity efficiency.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
RAID 5 and Raid 6 introduce parities to protect data against device failures.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Seagate enclosures supports declustered RAID6, which can be coupled with a top layer EC in CORTX to get the highest durability with best capacity efficiency.
</li>
</ul>
</div></section><section id="createred" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>Creating Redundancy</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
EC adds fault-tolerance by creating redundant data pieces.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Data is distributed across different storage media.
</li>
</ul>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
Simplest example: compute and store the parity data.
<ul>
<li class="fragment">
<font color="gray"> Given two bytes of data: <span class="math inline">\(B_1=01001001\)</span> and <span class="math inline">\(B_2=11011010\)</span>
</li>
</font>
<li class="fragment">
<font color="gray"> The parity data: <span class="math inline">\(P=B_1\mathbin{\oplus}B_2=10010011\)</span>
</li>
</font>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
Assume the drive that stored <span class="math inline">\(B_1\)</span> fails:
<ul>
<li class="fragment">
<font color="gray"> Compute <span class="math inline">\(P\mathbin{\oplus}B_2\)</span>, which is equal to <span class="math inline">\(B_1\)</span>.
</li>
</font>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
The data on the failed drive can be reconstructed.
<ul>
<li class="fragment">
<font color="gray"> Fault tolerant to one drive failure.
</li>
</font>
</ul>
</li>
</ul>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
<span class="math inline">\(c\)</span> pieces of redundancy data:
<ul>
<li class="fragment">
<font color="gray"> Parities computed using <em>Reed-Solomon algorithm</em>.
</li>
</font>
<li class="fragment">
<font color="gray"> Fault tolerant to <span class="math inline">\(c\)</span> simultaneous drive failures.
</li>
</font>
</ul>
</li>
<div class="my_vspacer">

</div>
<li class="fragment">
<strong>Main Question:</strong> What is the probability of having <span class="math inline">\(c+1\)</span> simultaneous failures?
</li>
<div class="my_vspacer">

</div>
</ul>
<div class="my_vspacer">

</div>
</div>
</section><section id="raiduerslide" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>RAID 5 &amp; 6 (with URE)</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="boxer">
<div style="display: inline-block;width:20%;margin-left:35%;">
<div id="slider-ndata_raid_study" class="regular-slider">

</div>
<div class="slider_label">
# of data drives
</div>
</div>
<div style="display: inline-block;width:14%;margin-left:15px;">
<div id="slider-nparity_raid_study" class="regular-slider">

</div>
<div class="slider_label">
# of parity drives
</div>
</div>
<div style="display:inline-block;width:95%;;margin-top:-5px">
<div id="myraid" style="margin-left:-150px;height:300px;margin-top:-20px">

</div>
</div>
</div>
<div id="surgeryraid" style="margin-top:-6px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt=" A Symbolic representation of the  &lt;span id='surgeryraidspan'&gt; RAID &lt;/span&gt;  including URE failures. Use the input sliders to change the number of drives or the redundancy. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; We will later derive the formulas for data durability for RAID5 in Eq. &lt;span class='myeqref' &gt; \@ref(eq:m1f2) &lt;/span&gt;, and RAID6 in Eq. &lt;span class='myeqref' &gt; \@ref(eq:mtwof) &lt;/span&gt;. &lt;/span&gt;" width="0.01%" />
<p class="caption">
A Symbolic representation of the <span id="surgeryraidspan"> RAID </span> including URE failures. Use the input sliders to change the number of drives or the redundancy. <span class="plus">… [+]</span> <span class="expanded-caption"> We will later derive the formulas for data durability for RAID5 in Eq. <span class="myeqref"> @ref(eq:m1f2) </span>, and RAID6 in Eq. <span class="myeqref"> @ref(eq:mtwof) </span>. </span>
</p>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
The <font color="red">red</font> arrows represent drive failures. Rate is scaled with the total number of drives:
<ul>
<li class="fragment">
<font color="gray"> <span class="math inline">\(\lambda\)</span> is the failure rate per drive, and <span class="math inline">\(n\lambda\)</span> is the total failure rate for <span class="math inline">\(n\)</span> drives.
</li>
</font>
<li class="fragment">
<font color="gray"> The arrow denoted with <span class="math inline">\(h\)</span> represents the data loss due to UREs- to be discussed in more detail later.
</li>
</font>
</ul>
</li>
<li class="fragment">
The <font color="green">green</font> arrows represent repairs. Failed drives are replaced, and data is rebuilt.
<ul>
<li class="fragment">
<font color="gray">The repair time, <span class="math inline">\(1/\mu\)</span>, depends on capacity and DR. It may be as long as several days.
</li>
</font>
</ul>
</li>
<li class="fragment">
Data is lost when the system moves to the right-most state.
<ul>
<li class="fragment">
<font color="gray"> <strong>Key metric: Mean Time to Data Loss (MTTDL)</strong>: it is a function of <span class="math inline">\(n\)</span>, <span class="math inline">\(c\)</span>, <span class="math inline">\(\lambda\)</span>, <span class="math inline">\(\mu\)</span>, drive capacity and <span class="math inline">\({\rm UER}\)</span>.
</li>
</font>
</ul>
</li>
</ul>
</div>
<script>

var nparity_raid_studySlider = document.getElementById('slider-nparity_raid_study');
noUiSlider.create(nparity_raid_studySlider, {
  start: [2], margin: 1,tooltips: [wNumb({decimals: 0})],step: 1,range: {min: 0, max: 2}
})

var ndata_raid_studySlider = document.getElementById('slider-ndata_raid_study');
noUiSlider.create(ndata_raid_studySlider, {
  start: [10], margin: 5,tooltips: [wNumb({decimals: 0})], step:1,range: {min: 4, max: 30}
})


</script>
<script type="text/javascript">
function raiddraw(mode,divid) {
nparity_raid_study=parseInt(nparity_raid_studySlider.noUiSlider.get())

ndata_raid_study=parseInt(ndata_raid_studySlider.noUiSlider.get())

var nodes = []; var edges = [];var network = null;
var i;
var dist=0
var sizer

for (i = 0; i < nparity_raid_study+2; i++) 
{  if(i==0){sizer=28}else{sizer=40}
 dist=dist+Math.pow(i, 0.43)*170;  var yloc=0;

if(i ==nparity_raid_study+1){yloc=-60}


 var thisnode={id: i, shape: 'image', image: 'lun'.concat(i.toString(),'.png'), 
 size:30,x:dist,y:yloc,size:sizer,       label:(ndata_raid_study+nparity_raid_study-i).toString().concat('H,', i.toString(),'F'),
font: {  color: 'blue',size: 14,face: 'arial', background: 'none',
strokeWidth: 0, strokeColor: '#ffffff', align: 'center',multi: false, vadjust: -97,
  }
 }
nodes.push(thisnode)

var roundval=0.5
if(i ==nparity_raid_study+1){
 var uerim='lunUER5.png'
 if(nparity_raid_study==2){  uerim='lunUER6.png'   }
 if(nparity_raid_study==0){  uerim='lunUER0.png'   }
      thisnode={id: i+1, shape: 'image', image:uerim , size:30,x:dist,y:-yloc,size:sizer,
      label:(ndata_raid_study+nparity_raid_study-i).toString().concat('H,', i.toString(),'F'),
     font: {color: 'blue',size: 14,face: 'arial', background: 'none',
  strokeWidth: 0, strokeColor: '#ffffff', align: 'center',multi: false, vadjust: -97,
       }
      }
 nodes.push(thisnode)
}
if(i==nparity_raid_study){roundval=0}
if(i<nparity_raid_study+1){
  edges.push( {from: i, to: i+1,arrows:"middle",smooth: {type: "curvedCW", roundness: roundval},label:(ndata_raid_study+nparity_raid_study-i).toString().concat("λ"), 
          color: {color:'red'},font: {color: '#343434',size: 15,background: 'none',vadjust:10} });
}
  edges.push( {from: i-1, to: i-2,arrows:"middle",smooth: {type: "curvedCW", roundness: 0.5},label:"μ", 
                color: {color:'green'},font: {color: '#343434',size: 15,background: 'none',vadjust:-10} })

};

 edges.push( {from: i-2, to: i,arrows:"middle",smooth: {type: "curvedCW", roundness: 0},label:"h", 
          color: {color:'red'},font: {color: '#343434',size: 15,background: 'none',vadjust:10} });

var container = document.getElementById(divid);
var data = {nodes: nodes, edges: edges};
var options = {nodes: {size:90,color: {background: '#006400'},font:{color:'#eeeeee', "size": 30}},
               physics: false,
                interaction: {
                    dragNodes: true,// do not allow dragging nodes
                    zoomView: true, // do not allow zooming
                    dragView: false  // do not allow dragging
                }
};
network = new vis.Network(container, data, options);

try{
var output = document.getElementById("surgeryraidspan")
var innerh=output.innerHTML
//alert(innerh)
if(nparity_raid_study==2){output.innerHTML=innerh.replace("RAID5", "RAID").replace("RAID6", "RAID").replace("RAID", "RAID6");}
else{
  if(nparity_raid_study==1){output.innerHTML=innerh.replace("RAID6", "RAID").replace("RAID5", "RAID").replace("RAID", "RAID5");}
      else{output.innerHTML=innerh.replace("RAID6", "RAID").replace("RAID5", "RAID")}
    }
     //alert(output.innerHTML)
}catch(err){}



}
</script>
<script>
ndata_raid_studySlider.noUiSlider.on('update', function( values, handle ) { raiddraw(1,'myraid')});
nparity_raid_studySlider.noUiSlider.on('update', function( values, handle ) { raiddraw(1,'myraid')});



</script>
<!--chapter:end:creating_redundancy.Rmd-->
</section></section>
<section><section id="minmath" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation_dividerpage" data-background="sg_bg.png"><h1>Durability with minimal math</h1><div class="myclassifier_Presentation pbox" style="text-align:center">
Here we review a few different approaches in the industry to compute data durability.
<div class="my_vspacersmall">

</div>
<p><font color="orange"> Press down arrow to navigate this sections.</font></p>
</div></section><section id="minmathsimplest" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>The simplest model</h2>
<div class="myclassifier_Presentation pbox">
Consider the following set up:
<div class="my_vspacersmall">

</div>
(<span class="math inline">\(n\)</span>) drives <input id="w_ndrive" class="myinputclass"  type="number" min="4" value="20" style="width:35px"/> , capacity(<span class="math inline">\(C\)</span>):<input id="w_drivecap" class="myinputclass"  type="number" min="1" value="16" style="width:35px"/>TB, redundancy(<span class="math inline">\(c\)</span>):<input id="w_nredundancy" class="myinputclass"  type="number" min="0" max="4" value="3" style="width:25px"/>, recovery speed (<span class="math inline">\(S\)</span>):<input id="w_drive_rec_rate" class="myinputclass"  type="number" value="50" min="1" style="width:45px"/> MB/s, and AFR:<input id="w_dafr" class="myinputclass"  type="number" value="1" min="0.1" step="1" style="width:45px"/>%.<br />

<div class="my_vspacersmall">

</div>
<ul>
<div class="my_vspacersmall">

</div>
<li class="fragment">
At this recovery rate, the recovery time from a drive failure is: <span id="w_rec_time_days_with_calc"> </span> <span class="w_rec_time_days"> </span> days.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The probability of losing a single drive in <span class="w_rec_time_days"> </span> days is: <span id="w_calc_prob_text"> </span> <span class="w_calc_prob"> </span>
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The system will lose data when there are <span class="w_nredundancyp_text"> </span> failures in <span class="w_rec_time_days"> </span> days, which has the probability: (<span class="calc_prob"></span>)<sup style="margin-left:-2px"> <span class="w_nredundancyp_text"> </span> </sup>.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Data durability= 1- Probability of <span class="w_nredundancyp_text"> </span> failure(s) in <span class="w_rec_time_days"> </span> days=1- (<span class="calc_prob"></span>)<sup style="margin-left:-2px"> <span class="w_nredundancyp_text"> </span> </sup>= <span class="w_nines_text"> </span>.
</li>
</ul>
<div class="my_vspacer">

</div>
<div class="fragment">
Number of nines is defined as the instances of leading 9’s in reliability: 0.998 has 2 nines, 0.9991 has 3 nines.
</div>
<div class="fragment">
<p><span class="math display">\[\begin{equation}  
\text{number of nines}=\text{Floor}\left(-log10(1-\text{Durability})\right) (\#eq:nondefinition)
\end{equation}\]</span></p>
</div>
</div>
<div class="myclassifier_Presentation pbox fragment">
<ul>
<li>
This model is very simple, but… <span class="fragment" > <font color="red"> it is wrong!</font> <span>
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The metric calculated is <b> not </b> the data durability for an <span class="w_nredundancy_text"></span>-redundant EC, it is for 1+<span class="w_nredundancy_text"></span> [original+<span class="w_nredundancy_text"></span> mirror(s)].
</li>
<ul>
<li class="fragment">
<font color="gray"> Note that the total number of drives, <span class="w_ndrive_text"> </span>, did not even enter the equations! </font>
</li>
<li class="fragment">
<font color="gray"> There are binomial(<span class="w_ndrive_text"> </span>,<span class="w_nredundancyp_text"> </span>)=<span class="choosenk"> </span> combinations to choose <span class="w_nredundancyp_text"> </span> failure(s) out of <span class="w_ndrive_text"> </span> drives. </font>
</li>
</ul>
<div class="my_vspacersmall">

</div>
<li class="fragment">
This is not even the durability for over a year, it is just over <span class="w_rec_time_days"> </span> days. There are <span class="w_rec_time_frames"> </span> such frames in a year.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
With the binomial coefficients and the # frames/year included, this model over-reports durability by at least <span class="w_overnines"> </span> nines.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
This model also ignores UREs.
</li>
</ul>
</div>
</section><section id="bbmodel" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>The BackBlaze Model</h2>
<div class="myclassifier_Presentation pbox" >
This is a model introduced by <img class="bblogo" SRC="Backblaze-logo-horizontal.jpg"> <span class="citation" data-cites="BBreli">[<a href="#/ref-BBreli" role="doc-biblioref">11</a>]</span>, <span class="citation" data-cites="BBcode">[<a href="#/ref-BBcode" role="doc-biblioref">12</a>]</span>.
<div class="my_vspacersmall">

</div>
<div class="fragment">
(<span class="math inline">\(n\)</span>) drives <input id="bb_ndrive" class="myinputclass"  type="number" min="4" value="20" style="width:35px"/>, capacity(<span class="math inline">\(C\)</span>):<input id="bb_drivecap" class="myinputclass"  type="number" min="1" value="16" style="width:35px"/>TB, redundancy(<span class="math inline">\(c\)</span>):<input id="bb_nredundancy" class="myinputclass"  type="number" min="0" max="3" value="3" style="width:25px"/>, recovery speed (<span class="math inline">\(S\)</span>):<input id="bb_drive_rec_rate" class="myinputclass"  type="number" value="28.5" min="1" step="0.5" style="width:50px"/> MB/s, and AFR:<input id="bb_dafr" class="myinputclass"  type="number" value="0.4" min="0.1" step="0.1" style="width:45px"/>%.
</div>
<div class="my_vspacersmall">

</div>
<!-- \times\frac{10^6}{60\times60\times24}-->
<ul>
<li class="fragment">
The recovery time from a drive failure is: <span class="math inline">\(T\equiv\frac{C}{S}\)</span>= <span class="bb_rec_time"> </span> days.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The AFR value can be converted to the failure rate as: <span class="math inline">\(\lambda=-\frac{\rm{ln}(1-\rm{AFR})}{\rm{ year}}\simeq\frac{\rm{AFR}}{\,\rm{ year}}\)</span>= <span class="bb_lambda"> </span>.
<div class="my_vspacersmall">

</div>
<li class="fragment">
The probability of a given drive to fail in <span class="bb_rec_time"> </span> days is: <span class="math inline">\(p_f\equiv\lambda T\)</span>= <span class="bb_pf"> </span>.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The system will <strong><b>not</b></strong> lose data when there are at most <span class="bb_nredundancy_text"> </span> failures in <span class="bb_rec_time"> </span> days.
</li>
<ul>
<li class="fragment">
<font color="gray"> The probability of not losing data in <span class="bb_rec_time"> </span> days is: <span class="math inline">\(p_\rm{no-loss}=\sum_{i=0}^c \binom{n}{i} (p_f)^i(1-p_f)^{n-i}\)</span> </font>=<span class="bb_pnl"> </span>
</li>
<div class="my_vspacersmall">

</div>
</ul>
</ul>
<div class="flexbox">
<div style="display:block;display: inline-block;width:70%;margin-top:2px;margin-bottom:-8px;margin-right:-10px">
<ul>
<li class="fragment">
There are <span class="math inline">\(N_F=\frac{365}{T}\)</span>=<span class="bb_rec_time_frames"> </span> such frames in a year.
</li>
<ul>
<li class="fragment">
<font color="gray"> The probability of not losing data in a year is: <span class="math inline">\((p_\rm{no-loss})^{N_F}\)</span> =<span class="bb_pnl_year"> </span> </font>
</li>
</ul>
</ul>
</div>
<div id="plotref_bbmodel" class="imgcont fragment" style="display:block;display: inline-block;margin-left:-3%;; width:35%;margin-top:2px;margin-bottom:-2px">
<div class="figure" style="text-align: center">
<img src="BB_model.png" alt="An illustration of the time frames." width="100%" />
<p class="caption">
An illustration of the time frames.
</p>
</div>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
This model is still simple, but… <span class="fragment" > <font color="red"> it has a few issues:</font> <span>
</li>
<ul>
<li class="fragment">
<font color="gray"> The segmentation of a year into <span class="bb_rec_time_frames"> </span> chunks of <span class="bb_rec_time"> </span> days implies that data is lost only when <span class="bb_nredundancyp_text"> </span> failures happen in a given frame. The cases of <span class="bb_nredundancyp_text"></span> failures within in <span class="bb_rec_time"> </span> days but spanning two subsequent frames are missed. </font>
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
<font color="gray"> It is implicitly assumed that every frame starts with a <span class="bb_nredundancy_text"></span>-redundant system. In reality, there may be up to <span class="bb_nredundancy_text"></span> ongoing repairs exiting the previous frame, and a single drive failure early in the next frame will cause data loss. </font>
</li>
<div class="my_vspacersmall">

</div>
</ul>
<li class="fragment">
Ignoring UREs, BackBlaze model works reasonably well in the low AFR limit (up to a factor of <span class="math inline">\(\sim2\)</span>).
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Including UREs will reduce the data durability by <span class="bb_overnines"> </span> nines.
</li>
</ul>
</div>
</section><section id="minmathav" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>The most intuitive model</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="flexbox">
<div id="plotref_avaldef" class="imgcont" style="display:block;display: inline-block;width:30%;margin-top:2px;margin-bottom:-8px">
<div class="figure" style="text-align: center">
<img src="mtbf.png" alt="An illustration of the time scales." width="100%" />
<p class="caption">
An illustration of the time scales.
</p>
</div>
</div>
<ul>
<li class="fragment">
Figure <span class="figref"> plotref_avaldef_NTT </span> shows the time scales in a repairable system.
</li>
<li class="fragment">
A system of <span class="math inline">\(n\)</span> drives has the Mean Time To Failure: <span class="math inline">\(\rm{MTTF}=1/(n \lambda).\)</span>
</li>
<li class="fragment">
A failed drive is replaced, and rebuilt. Mean Time To Repair: <span class="math inline">\(\rm{MTTR}=1/\mu.\)</span>
</li>
<li class="fragment">
Fraction of the time spent for repair: <span class="math inline">\(\frac{{\rm MTTR}}{{\rm MTTF}+{\rm MTTR} }\)</span>
</li>
</ul>
</div>
</div>
<ul class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<li>
Fraction of the time spent for repair: <span class="math inline">\(\frac{{\rm MTTR}}{{\rm MTTF}+{\rm MTTR} }\simeq \frac{{\rm MTTR}}{{\rm MTTF}}=\frac{n\lambda}{\mu}\)</span> (MTTF <span class="math inline">\(\gg\)</span> MTTR).
</li>
<li class="fragment">
There are <span class="math inline">\(N-1\)</span> drives left running. The rate of failure: <span class="math inline">\((n-1)\lambda\)</span>
</li>
<li class="fragment">
Multiply this rate with the fraction of time in recovery: <span class="math inline">\(\,\,\frac{n\lambda}{\mu}(n-1)\lambda=\frac{n (n-1)\lambda^2}{\mu}\)</span>
<ul>
<li class="fragment">
<font color="gray">This is the rate of data loss. Inverting the expression: <span class="math inline">\(\,\,\, {\rm MTTDL}_1=\frac{\mu}{n(n-1)\lambda^2}\)</span>
</li>
</font>
</ul>
</li>
<li class="fragment">
When there are two parity drives, we can iterate to get: <span class="math inline">\(\,\,\,\,{\rm MTTDL}_2=\frac{\mu^2}{n(n-1)(n-2)\lambda^3}\)</span>
</li>
</ul>
<ul class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<li>
For <span class="math inline">\(c\)</span> parity drives, we can recursively iterate to get: <span class="math inline">\({\rm MTTDL}_c=\left[\frac{\mu}{\lambda}\right]^c\frac{(n-c-1)!}{\lambda n!}\)</span>
</li>
<li class="fragment">
<span class="math inline">\(c=1\)</span> is a RAID5, and <span class="math inline">\(c=2\)</span> is a RAID6 setup. <span class="math inline">\(c\geq3\)</span> cases are refereed to as Erasure Coding in general.
</li>
<li class="fragment">
This model is very intuitive, and works great, but… <span class="fragment" > <font color="red"> it is not clear how to include UREs.</font> <span>
</li>
</ul>
<!--chapter:end:durability_min_math.Rmd-->
</section></section>
<section><section id="fullmath" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>Durability with rigorous math</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="flexbox">
<ul>
<li>
Figure shows the Markov chain for a system of <span class="math inline">\(n\)</span> drives with one redundancy.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Markov chain represents state transitions and state probabilities <span class="math inline">\(p_j(t)\)</span>.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The change in <span class="math inline">\(p_j(t)\)</span> is dictated by incoming and outgoing arrows.
</li>
</ul>
<div id="plotref_oneredmarkov" class="imgcont" style="display:block;display: inline-block;width:30%; padding-left:20px;margin-right:5px;margin-left:5px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/oneredmarkov-1.svg" alt="Markov Chain with one redundancy." width="768" />
<p class="caption">
Markov Chain with one redundancy.
</p>
</div>
</div>
</div>
</div>
<div class="myclassifier_Presentation fragment pbox" style="display:block">
<div class="collapsible_container">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:10px">
Show the details
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-34px">
Hide
</button>
<div class="experience__more sourceCode r" style=";margin-top:-1px;">
<p>The transition equations: <span class="math display">\[\begin{eqnarray}
\dot{p}_{n}+n \lambda p_{n} -\mu p_{n-1}&amp;=&amp;0 \nonumber\\
\dot{p}_{n-1}+(n-1) \lambda p_{n-1} +\mu p_{n-1}-n \lambda p_{n} &amp;=&amp;0 \nonumber\\
\dot{p}_{n-2}-(n-1) \lambda p_{n-1} &amp;=&amp;0 .
(\#eq:m1)
\end{eqnarray}\]</span> After Laplace transforming and converting to a matrix equation, we get: <span class="math display">\[\begin{eqnarray}
 \hspace{-0.5em} \begin{bmatrix}
    P_{n}(s)   \\
   P_{n-1}(s)\\
   P_{n-2}(s)
  \end{bmatrix}\hspace{-0.5em}=\hspace{-0.5em}
 \begin{bmatrix}
    s +n \lambda &amp; -\mu &amp;0 \\
    -n\lambda &amp; s +(n-1)\lambda +\mu &amp;0\\
    0 &amp;-(n-1)\lambda &amp; s
  \end{bmatrix}^{-1}
 \begin{bmatrix}
    1  \\
  0\\
  0
  \end{bmatrix}\hspace{-0.4em} .
  (\#eq:m1lap)
\end{eqnarray}\]</span> We are interested in <span class="math inline">\(p_{n-2}\)</span>, which is the probability that system will have <span class="math inline">\(2\)</span> simultaneous failures, hence data will be lost. Inverse Laplace transforming, we can calculate the reliability as <span class="math display">\[\begin{eqnarray}
{\rm R}(t)&amp;=&amp;1-p_{n-2}(t)\nonumber\\
&amp;=&amp;\frac{\mu + (2 n-1) \lambda + 
      \sqrt{(\lambda  - \mu)^2 + 4 \lambda  \mu n}}{2 \sqrt{(\lambda  - \mu)^2 + 4
   \lambda  \mu n})}\nonumber\\
   &amp;&amp;\times e^{-\frac{1}{2}\left(\mu + \lambda  (2n-1) -\sqrt{(\lambda  - \mu)^2 + 4 \lambda  \mu n}\right) t}\nonumber\\
   &amp;-&amp;\frac{\mu + (2 n-1) \lambda - \sqrt{(\lambda  - \mu)^2 + 4 \lambda  \mu n}}{2 \sqrt{(\lambda  - \mu)^2 +4\lambda  \mu n})}\nonumber\\
   &amp;&amp;\times   e^{-\frac{1}{2}\left(\mu + \lambda  (2n-1)+\sqrt{(\lambda  - \mu)^2 + 4 \lambda  \mu n}\right) t}\nonumber\\
   &amp;\sim&amp; \left[1+n(n-1)\frac{\lambda^2}{\mu^2}\right]e^{-\frac{t}{\mu/[\lambda^2n(n-1)]}}\nonumber\\
   &amp;&amp;-n(n-1)\frac{\lambda^2}{\mu^2}e^{-t[\mu+\lambda(2n-1]},
   (\#eq:m1f)
\end{eqnarray}\]</span> where we expanded in powers of <span class="math inline">\(\lambda/\mu\)</span> and kept the leading terms in the coefficients and exponents. We can actually further simplify the equation since <span class="math inline">\(\frac{\lambda^2}{\mu^2}\ll 1\)</span>, for instance for recent products we can use <span class="math inline">\({\rm AFR}&lt;0.5\%\)</span> and the restore time is at the order of days, which gives <span class="math inline">\(\frac{\lambda}{\mu}\sim 10^{-4}\)</span>. Therefore, we can safely drop <span class="math inline">\(\frac{\lambda^2}{\mu^2}\)</span> terms to get <span class="math display">\[\begin{equation}
{\rm R}(t)\sim e^{-t/{\rm MTTDL}_1},\nonumber\\
(\#eq:m1f2R)
\end{equation}\]</span> with <span class="math display">\[\begin{equation}
 {\rm  MTTDL}_1=\frac{1}{n(n-1) \lambda}\frac{\mu}{\lambda}(\#eq:m1f2).
\end{equation}\]</span></p>
<p><b>Reliability with two redundancies:</b></p>
<p>It will get more complicated but, we will be getting better at extracting the relevant term. Let’s apply this to an <span class="math inline">\(n-\)</span>drive system with two redundancies, which will have the Markov chain in Fig.</p>
<div id="plotref_markovtworedundancy" class="imgcont" style="display:block;display: inline-block;width:40%; margin-left:30%;padding-left:50px;margin-right:10px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovtworedundancy-1.svg" alt="Markov Chain for a system with two redundancies" width="40%" />
<p class="caption">
Markov Chain for a system with two redundancies
</p>
</div>
</div>
<p>The state equation in the <span class="math inline">\(s\)</span>-domain is <span class="math display">\[\begin{eqnarray}
 \hspace{-1em} \begin{bmatrix}
    P_{n}(s)   \\
   P_{n-1}(s)\\
   P_{n-2}(s)\\
   P_{n-3}(s)
  \end{bmatrix}&amp;=&amp;
\mathcal{S}
 \begin{bmatrix}
    1  \\
  0\\
  0\\
  0
  \end{bmatrix},(\#eq:statematrix)
\end{eqnarray}\]</span> where we defined <span class="math inline">\(\mathcal{S}\)</span> as: <span class="math display">\[\begin{eqnarray}
 \hspace{-1em}
  \hspace{-0.5em}\begin{bmatrix}
    s +n \lambda &amp; -\mu &amp;0 &amp;0 \\
    -n\lambda &amp; s +(n-1)\lambda +\mu &amp;-\mu&amp;0\\
    0 &amp;(n-1)\lambda &amp; s +(n-2)\lambda +\mu &amp;0\\
    0&amp;0&amp;(n-2)\lambda&amp;s
  \end{bmatrix}^{-1}(\#eq:m2s)
\end{eqnarray}\]</span></p>
<p>We are interested in <span class="math inline">\(P_{n-3}\)</span>. One can study the roots of the inverse <span class="math inline">\(s\)</span> matrix to find that <span class="math inline">\(P_{n-3}\)</span> has a pole at <span class="math inline">\(s=0\)</span> with coefficient <span class="math inline">\(1\)</span> and another one with coefficient <span class="math inline">\(1\)</span> at <span class="math inline">\(s=S_1\)</span> where <span class="math display">\[\begin{equation}
    S_1\simeq \lambda n (n-1)(n-2)\left(\frac{\lambda}{\mu}\right)^2 (\#eq:spoles)
\end{equation}\]</span> Inverse Laplace transforming, we can calculate the reliability as</p>
<p><span class="math display">\[\begin{equation}
{\rm R}(t)=1-p_{n-1}(t)\simeq1-(1-e^{-t/{\rm MTTDL}_2})=e^{-t/{\rm MTTDL}_2}(\#eq:m2fR)
\end{equation}\]</span> with <span class="math display">\[\begin{equation}
{\rm MTTDL}_2=\frac{1}{n(n-1)(n-2) \lambda}\left(\frac{\mu}{\lambda}\right)^2 (\#eq:mtwof).
\end{equation}\]</span></p>
</div>
</div>
<div class="flexbox">
<ul style="display: inline-block;width:50%;margin-top:5px;margin-right:-30px">
<li>
The state transitions are described by a set of coupled DEs.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
They can be solved by Laplace transforms.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The equations are solved for the data loss state.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
The reliability: <span class="math inline">\({\rm R}(t)=1-p_{\rm F}(t)\sim e^{-t/{\rm MTTDL}_1}\)</span>
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
<span class="math inline">\({\rm MTTDL}_1=\frac{1}{n(n-1) \lambda}\frac{\mu}{\lambda}.\)</span>
</li>
</ul>
<div style="display: inline-block;width:50%;margin-top:5px;margin-left:-5%">
<p><span class="math display">\[\begin{eqnarray}
\dot{p}_{n}+n \lambda p_{n} -\mu p_{n-1}&amp;=&amp;0\nonumber \\
\dot{p}_{n-1}+(n-1) \lambda p_{n-1} +\mu p_{n-1}-n \lambda p_{n} &amp;=&amp;0\nonumber\\
\dot{p}_{\rm F}-(n-1) \lambda p_{n-1} &amp;=&amp;0(\#eq:oneredmarkov)
\end{eqnarray}\]</span></p>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>Markov chain analysis is needed to address complicated cases:
<ul>
<li>Declustered Parity (ADAPT),</li>
<li>Re-Manufacturing in the field (ReMan),</li>
<li>Generic Weibull distribution for drive failures (<span class="math inline">\(\beta\neq1\)</span>),</li>
<li>Latent sector errors, i.e., hard errors (UREs).</li>
</ul></li>
<li>Most of the items above will be addressed in this presentation.</li>
</ul>
</div></section><section id="montecarlo" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>Monte Carlo Simulation</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation pbox">

<div class="collapsible_container">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:10px">
Show the simulation script (JSL)
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-38px">
Hide
</button>
<div class="experience__more sourceCode r" style=";margin-top:-5px;">
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>ï»¿<span class="op">/</span><span class="er">/</span>Nov <span class="dv">2020</span>  contact Serkay Olmez <span class="cf">for</span> questions</span>
<span id="cb1-2"><a href="#cb1-2"></a>scr_path=Get Default <span class="kw">Directory</span>();scr_path=<span class="kw">substr</span>(scr_path,<span class="dv">2</span>,<span class="kw">length</span>(scr_path));scr_name =<span class="st"> </span>Current <span class="kw">Window</span>() <span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span>get window title;</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a>calc_reli=<span class="cf">function</span>({},</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="dt">newname=</span><span class="st">&quot;Reli simulation &quot;</span><span class="op">||</span><span class="kw">substitute</span>(<span class="kw">substitute</span>(<span class="kw">MDYHMS</span>(<span class="kw">today</span>()),<span class="st">&quot;/&quot;</span>,<span class="st">&quot;_&quot;</span>),<span class="st">&quot;:&quot;</span>,<span class="st">&quot;_&quot;</span>);</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="dt">dtt=</span>new <span class="kw">table</span>(newname,<span class="kw">invisible</span>(<span class="dv">1</span>));</span>
<span id="cb1-7"><a href="#cb1-7"></a>dtt<span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span>add <span class="kw">rows</span>(num_simulations<span class="op">*</span>num_drives_per_system);</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">eval</span>(<span class="kw">substitute</span>(<span class="kw">expr</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;sys_id&quot;</span>,<span class="kw">formula</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">Floor</span>((<span class="kw">Row</span>()<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>num_drps_)))),<span class="kw">expr</span>(num_drps_),name <span class="kw">expr</span>(num_drives_per_system)));</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="kw">eval</span>(<span class="kw">substitute</span>(<span class="kw">expr</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;drv_id&quot;</span>,<span class="kw">formula</span>(<span class="kw">Row</span>()<span class="op">-</span><span class="kw">Floor</span>((<span class="kw">Row</span>()<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>num_drps_)<span class="op">*</span>num_drps_))),<span class="kw">expr</span>(num_drps_),name <span class="kw">expr</span>(num_drives_per_system)));</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a> dtt<span class="op">&lt;</span><span class="er">&lt;</span>delete <span class="kw">column</span>(<span class="dv">1</span>); <span class="kw">wait</span>(<span class="dv">1</span><span class="op">+</span><span class="kw">log10</span>(num_simulations)<span class="op">/</span><span class="dv">2</span>);<span class="op">:</span>drv_id<span class="op">&lt;</span><span class="er">&lt;</span>delete <span class="kw">formula</span>();<span class="op">:</span>sys_id<span class="op">&lt;</span><span class="er">&lt;</span>delete <span class="kw">formula</span>();</span>
<span id="cb1-12"><a href="#cb1-12"></a></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="kw">eval</span>(<span class="kw">substitute</span>(<span class="kw">expr</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;drv_failure_time&quot;</span>,<span class="kw">formula</span>(Random <span class="kw">Weibull</span>(beta_,alpha_)))),<span class="kw">expr</span>(alpha_),name <span class="kw">expr</span>(alpha),<span class="kw">expr</span>(beta_),name <span class="kw">expr</span>(betav)));</span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="kw">column</span>(<span class="st">&quot;drv_failure_time&quot;</span>)<span class="op">&lt;</span><span class="er">&lt;</span>delete <span class="kw">formula</span>();</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a>dtt <span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span><span class="kw">Sort</span>( <span class="kw">By</span>(<span class="op">:</span>sys_id,<span class="kw">column</span>(<span class="st">&quot;drv_failure_time&quot;</span>)), <span class="kw">Order</span>(Ascending,Ascending), Replace Table);</span>
<span id="cb1-18"><a href="#cb1-18"></a>dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;num_failures&quot;</span>,numeric); dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;num_max_failures&quot;</span>,numeric);</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="op">:</span>num_failures[<span class="dv">1</span>]=<span class="dv">1</span>;<span class="op">:</span>num_max_failures[<span class="dv">1</span>]=<span class="dv">1</span>;<span class="dt">maxseen=</span><span class="dv">1</span>;<span class="dt">toberecovered=</span>{};</span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="cf">for</span>(<span class="dt">rr=</span><span class="dv">2</span>,rr<span class="op">&lt;=</span><span class="kw">nrows</span>(dtt),rr<span class="op">++</span>,</span>
<span id="cb1-23"><a href="#cb1-23"></a>    <span class="dt">rr_time=</span><span class="op">:</span>drv_failure_time[rr];</span>
<span id="cb1-24"><a href="#cb1-24"></a>    <span class="dt">rr_m1_time=</span><span class="op">:</span>drv_failure_time[rr<span class="dv">-1</span>];</span>
<span id="cb1-25"><a href="#cb1-25"></a>    <span class="cf">if</span>(<span class="op">:</span>sys_id[rr<span class="dv">-1</span>]<span class="op">!=</span><span class="er">:</span>sys_id[rr],<span class="op">:</span>num_failures[rr]=<span class="dv">1</span>;  <span class="dt">toberecovered=</span>{};<span class="dt">maxseen=</span><span class="dv">1</span>;<span class="op">:</span>num_max_failures[rr]=<span class="dv">1</span>);</span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a>    <span class="cf">if</span>(<span class="op">:</span>sys_id[rr<span class="dv">-1</span>]<span class="op">==</span><span class="er">:</span>sys_id[rr],</span>
<span id="cb1-28"><a href="#cb1-28"></a>        Insert <span class="kw">Into</span>( toberecovered,<span class="op">:</span>drv_failure_time[rr<span class="dv">-1</span>]);</span>
<span id="cb1-29"><a href="#cb1-29"></a>        <span class="dt">tosubtracted=</span><span class="dv">0</span>;</span>
<span id="cb1-30"><a href="#cb1-30"></a>        <span class="cf">for</span>(<span class="dt">rc=</span><span class="kw">nitems</span>(toberecovered),rc<span class="op">&gt;=</span><span class="dv">1</span>,rc<span class="op">--</span>,</span>
<span id="cb1-31"><a href="#cb1-31"></a>          <span class="cf">if</span>(<span class="op">:</span>drv_failure_time[rr]<span class="op">-</span>toberecovered[rc]<span class="op">&gt;</span>repair_time, tosubtracted<span class="op">++</span>;remove <span class="kw">from</span>(toberecovered,rc))</span>
<span id="cb1-32"><a href="#cb1-32"></a>          );</span>
<span id="cb1-33"><a href="#cb1-33"></a>            </span>
<span id="cb1-34"><a href="#cb1-34"></a>            <span class="op">:</span>num_failures[rr]=<span class="er">:</span>num_failures[rr<span class="dv">-1</span>]<span class="op">-</span>tosubtracted<span class="op">+</span><span class="dv">1</span>;</span>
<span id="cb1-35"><a href="#cb1-35"></a>            <span class="cf">if</span>(<span class="op">:</span>num_failures[rr]<span class="op">&gt;</span>maxseen,<span class="dt">maxseen=</span><span class="op">:</span>num_failures[rr]);</span>
<span id="cb1-36"><a href="#cb1-36"></a>            <span class="op">:</span>num_max_failures[rr]   =maxseen</span>
<span id="cb1-37"><a href="#cb1-37"></a>    );</span>
<span id="cb1-38"><a href="#cb1-38"></a>);</span>
<span id="cb1-39"><a href="#cb1-39"></a><span class="dt">rc=</span><span class="dv">1</span>;</span>
<span id="cb1-40"><a href="#cb1-40"></a></span>
<span id="cb1-41"><a href="#cb1-41"></a></span>
<span id="cb1-42"><a href="#cb1-42"></a><span class="op">/</span><span class="er">/</span><span class="kw">throw</span>();</span>
<span id="cb1-43"><a href="#cb1-43"></a><span class="dt">mm=</span><span class="dv">1</span>;<span class="dt">rr=</span><span class="dv">1</span>;<span class="dt">mms=</span><span class="dv">1</span>;</span>
<span id="cb1-44"><a href="#cb1-44"></a><span class="dt">big_failure_perc_table=</span>{};</span>
<span id="cb1-45"><a href="#cb1-45"></a><span class="cf">for</span>(<span class="dt">mms=</span><span class="dv">1</span>,mms<span class="op">&lt;=</span><span class="dv">12</span><span class="op">/</span>stepsize<span class="op">*</span>max_year,mms<span class="op">++</span>,</span>
<span id="cb1-46"><a href="#cb1-46"></a>    <span class="dt">mm=</span>stepsize<span class="op">*</span>mms; <span class="op">/</span><span class="er">/</span>do this quarterly to speed up</span>
<span id="cb1-47"><a href="#cb1-47"></a>    <span class="dt">month_tresh=</span><span class="dv">365</span><span class="op">/</span><span class="dv">12</span><span class="op">*</span>mm;  </span>
<span id="cb1-48"><a href="#cb1-48"></a>    <span class="cf">if</span> (<span class="kw">mod</span>(mm, <span class="dv">5</span>) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>,<span class="kw">caption</span>(<span class="st">&quot;Status:&quot;</span><span class="op">||</span><span class="st"> </span><span class="kw">char</span>(<span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>mm<span class="op">/</span>(<span class="dv">12</span><span class="op">*</span>max_year)))<span class="op">||</span><span class="st"> &quot;% &quot;</span>);  <span class="kw">wait</span>(<span class="dv">0</span>); )  ;</span>
<span id="cb1-49"><a href="#cb1-49"></a>    <span class="kw">try</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>delete <span class="kw">column</span>(<span class="st">&quot;filtered_num_max_failures&quot;</span>));</span>
<span id="cb1-50"><a href="#cb1-50"></a>    <span class="kw">Eval</span>(<span class="kw">Substitute</span>(<span class="kw">Expr</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;filtered_num_max_failures&quot;</span>,<span class="kw">formula</span>(<span class="cf">if</span>(<span class="op">:</span>drv_failure_time<span class="op">&gt;</span>_thres_,.,<span class="op">:</span>num_max_failures)))), <span class="kw">Expr</span>(_thres_), month_tresh));</span>
<span id="cb1-51"><a href="#cb1-51"></a>    <span class="dt">dts=</span>dtt <span class="op">&lt;</span><span class="er">&lt;</span><span class="kw">Summary</span>(<span class="kw">Group</span>( <span class="op">:</span>sys_id ), <span class="kw">Max</span>( <span class="op">:</span>filtered_num_max_failures ),Link to original data <span class="kw">table</span>( <span class="dv">0</span> ),<span class="kw">invisible</span>(<span class="dv">1</span>));</span>
<span id="cb1-52"><a href="#cb1-52"></a>    <span class="kw">column</span>(<span class="st">&quot;Max(filtered_num_max_failures)&quot;</span>)<span class="op">&lt;</span><span class="er">&lt;</span>set <span class="kw">name</span>(<span class="st">&quot;max_in_frame&quot;</span>);</span>
<span id="cb1-53"><a href="#cb1-53"></a>    <span class="op">:</span>max_in_frame[dts<span class="op">&lt;</span><span class="er">&lt;</span>get rows <span class="kw">where</span>(is <span class="kw">missing</span>(<span class="op">:</span>max_in_frame))]=<span class="dv">0</span>; <span class="op">/</span><span class="er">/</span>filling <span class="cf">in</span> the missing rows<span class="op">-</span><span class="st"> </span>they had no failures</span>
<span id="cb1-54"><a href="#cb1-54"></a>    <span class="dt">failure_perc_table=</span>{};dts<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;system_failure&quot;</span>,numeric);</span>
<span id="cb1-55"><a href="#cb1-55"></a>    <span class="cf">for</span>(<span class="dt">rr=</span><span class="dv">1</span>,rr<span class="op">&lt;=</span><span class="kw">nitems</span>(redundancy),rr<span class="op">++</span>,</span>
<span id="cb1-56"><a href="#cb1-56"></a>        <span class="kw">Eval</span>(<span class="kw">Substitute</span>(<span class="kw">Expr</span>(<span class="op">:</span>system_failure<span class="op">&lt;</span><span class="er">&lt;</span>set <span class="kw">formula</span>(<span class="cf">if</span>(max_in_frame<span class="op">&gt;</span>_red,<span class="dv">100</span>,<span class="dv">0</span>))), <span class="kw">Expr</span>(_red), redundancy[rr]));</span>
<span id="cb1-57"><a href="#cb1-57"></a>        <span class="op">:</span>system_failure<span class="op">&lt;</span><span class="er">&lt;</span>eval <span class="kw">formula</span>();</span>
<span id="cb1-58"><a href="#cb1-58"></a>        failure_perc_table[rr]=col <span class="kw">mean</span>(<span class="op">:</span>system_failure)</span>
<span id="cb1-59"><a href="#cb1-59"></a></span>
<span id="cb1-60"><a href="#cb1-60"></a>    );</span>
<span id="cb1-61"><a href="#cb1-61"></a>        dts<span class="op">&lt;</span><span class="er">&lt;</span>close <span class="kw">window</span>();big_failure_perc_table[mms]=failure_perc_table;</span>
<span id="cb1-62"><a href="#cb1-62"></a>);</span>
<span id="cb1-63"><a href="#cb1-63"></a></span>
<span id="cb1-64"><a href="#cb1-64"></a><span class="kw">caption</span>(remove); dtt<span class="op">&lt;</span><span class="er">&lt;</span>close <span class="kw">window</span>();</span>
<span id="cb1-65"><a href="#cb1-65"></a>);</span>
<span id="cb1-66"><a href="#cb1-66"></a><span class="op">/</span><span class="er">///////////////////////////////////////</span></span>
<span id="cb1-67"><a href="#cb1-67"></a>clear <span class="kw">log</span>();</span>
<span id="cb1-68"><a href="#cb1-68"></a><span class="kw">try</span>(dtsum<span class="op">&lt;</span><span class="er">&lt;</span>close <span class="kw">window</span>());<span class="kw">try</span>(dtt<span class="op">&lt;</span><span class="er">&lt;</span>close <span class="kw">window</span>());</span>
<span id="cb1-69"><a href="#cb1-69"></a>start_time=<span class="kw">today</span>();</span>
<span id="cb1-70"><a href="#cb1-70"></a>max_year=<span class="dv">5</span>;</span>
<span id="cb1-71"><a href="#cb1-71"></a></span>
<span id="cb1-72"><a href="#cb1-72"></a></span>
<span id="cb1-73"><a href="#cb1-73"></a>AFRlist={<span class="dv">25</span>,<span class="dv">31</span>,<span class="dv">38</span>};repair_timelist={<span class="dv">6</span>};redundancy={<span class="dv">1</span>};num_drives_per_system_list={<span class="dv">9</span>};</span>
<span id="cb1-74"><a href="#cb1-74"></a></span>
<span id="cb1-75"><a href="#cb1-75"></a>AFRlist={<span class="fl">0.5</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>};repair_timelist={<span class="dv">12</span>,<span class="dv">24</span>,<span class="dv">48</span>,<span class="dv">120</span>,<span class="dv">240</span>};redundancy={<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>};num_drives_per_system_list={<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">16</span>,<span class="dv">24</span>};</span>
<span id="cb1-76"><a href="#cb1-76"></a>AFRlist={<span class="dv">2</span>};repair_timelist={<span class="dv">12</span>,<span class="dv">24</span>,<span class="dv">48</span>,<span class="dv">120</span>,<span class="dv">240</span>};redundancy={<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>};num_drives_per_system_list={<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">16</span>,<span class="dv">24</span>};</span>
<span id="cb1-77"><a href="#cb1-77"></a></span>
<span id="cb1-78"><a href="#cb1-78"></a></span>
<span id="cb1-79"><a href="#cb1-79"></a>AFRlist={<span class="fl">2.5</span>};repair_timelist={<span class="dv">4</span>};<span class="op">/</span><span class="er">/</span>days</span>
<span id="cb1-80"><a href="#cb1-80"></a>redundancy={<span class="dv">0</span>,<span class="dv">1</span>};num_drives_per_system_list={<span class="dv">20</span>};</span>
<span id="cb1-81"><a href="#cb1-81"></a></span>
<span id="cb1-82"><a href="#cb1-82"></a>betalist={<span class="dv">1</span>,<span class="fl">1.25</span>,<span class="fl">1.5</span>};</span>
<span id="cb1-83"><a href="#cb1-83"></a><span class="op">/</span><span class="er">/</span>AFRlist={<span class="fl">0.2</span>};repair_timelist={<span class="fl">0.33</span>}; num_drives_per_system_list={<span class="dv">8</span>};</span>
<span id="cb1-84"><a href="#cb1-84"></a>stepsize=<span class="dv">3</span>; <span class="op">/</span><span class="er">/</span><span class="cf">in</span> months</span>
<span id="cb1-85"><a href="#cb1-85"></a></span>
<span id="cb1-86"><a href="#cb1-86"></a></span>
<span id="cb1-87"><a href="#cb1-87"></a>dtsum=new <span class="kw">table</span>(<span class="st">&quot;Reli Summary&quot;</span>, <span class="kw">invisible</span>(<span class="dv">1</span>));</span>
<span id="cb1-88"><a href="#cb1-88"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;simulation_size&quot;</span>);dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;total_num_of_drives&quot;</span>);dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;redundancy&quot;</span>);</span>
<span id="cb1-89"><a href="#cb1-89"></a><span class="kw">eval</span>(<span class="kw">parse</span>(<span class="st">&quot;dtsum&lt;&lt;new column(\!&quot;</span><span class="kw">AFR</span>(%)\<span class="op">!</span><span class="st">&quot;)&quot;</span>)); <span class="kw">eval</span>(<span class="kw">parse</span>(<span class="st">&quot;dtsum&lt;&lt;new column(\!&quot;</span><span class="kw">repair_time</span>(days)\<span class="op">!</span><span class="st">&quot;)&quot;</span>));</span>
<span id="cb1-90"><a href="#cb1-90"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;time(months)&quot;</span>);dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;system failure(%)&quot;</span>);</span>
<span id="cb1-91"><a href="#cb1-91"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;system_reli&quot;</span>,<span class="kw">formula</span>(<span class="dv">1</span><span class="op">-</span><span class="st"> </span><span class="er">:</span><span class="kw">Name</span>( <span class="st">&quot;system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> ));</span>
<span id="cb1-92"><a href="#cb1-92"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;MC_num_of_nines&quot;</span>,<span class="kw">formula</span>(<span class="kw">floor</span>(<span class="op">-</span><span class="kw">Log10</span>( <span class="op">:</span><span class="kw">Name</span>( <span class="st">&quot;system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> ))));</span>
<span id="cb1-93"><a href="#cb1-93"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;MC_num_of_nines_&quot;</span>,<span class="kw">formula</span>(<span class="op">-</span><span class="kw">Log10</span>( <span class="op">:</span><span class="kw">Name</span>( <span class="st">&quot;system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> )));</span>
<span id="cb1-94"><a href="#cb1-94"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;simulation_duration&quot;</span>);</span>
<span id="cb1-95"><a href="#cb1-95"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;beta&quot;</span>);</span>
<span id="cb1-96"><a href="#cb1-96"></a></span>
<span id="cb1-97"><a href="#cb1-97"></a>index=<span class="dv">0</span>;</span>
<span id="cb1-98"><a href="#cb1-98"></a>indexmax=<span class="st"> </span><span class="kw">nitems</span>(AFRlist)<span class="op">*</span><span class="kw">nitems</span>(repair_timelist)<span class="op">*</span><span class="kw">nitems</span>(num_drives_per_system_list)<span class="op">*</span><span class="kw">nitems</span>(betalist);</span>
<span id="cb1-99"><a href="#cb1-99"></a>gridindex=<span class="dv">0</span>;bi=<span class="dv">1</span>;afrindex=<span class="dv">1</span>;repindex=<span class="dv">1</span>;numodindex=<span class="dv">1</span>;</span>
<span id="cb1-100"><a href="#cb1-100"></a></span>
<span id="cb1-101"><a href="#cb1-101"></a></span>
<span id="cb1-102"><a href="#cb1-102"></a><span class="cf">for</span>(<span class="dt">bi=</span><span class="dv">1</span>,bi<span class="op">&lt;=</span><span class="kw">nitems</span>(betalist),bi<span class="op">++</span>,</span>
<span id="cb1-103"><a href="#cb1-103"></a>    <span class="dt">betav=</span>betalist[bi];</span>
<span id="cb1-104"><a href="#cb1-104"></a>    <span class="cf">for</span>(<span class="dt">numodindex=</span><span class="dv">1</span>,numodindex<span class="op">&lt;=</span><span class="kw">nitems</span>(num_drives_per_system_list),numodindex<span class="op">++</span>,</span>
<span id="cb1-105"><a href="#cb1-105"></a>        <span class="dt">num_drives_per_system=</span>num_drives_per_system_list[numodindex];</span>
<span id="cb1-106"><a href="#cb1-106"></a>        <span class="cf">for</span>(<span class="dt">afrindex=</span><span class="dv">1</span>,afrindex<span class="op">&lt;=</span><span class="kw">nitems</span>(AFRlist),afrindex<span class="op">++</span>,</span>
<span id="cb1-107"><a href="#cb1-107"></a>          <span class="cf">for</span>(<span class="dt">repindex=</span><span class="dv">1</span>,repindex<span class="op">&lt;=</span><span class="kw">nitems</span>(repair_timelist),repindex<span class="op">++</span>,</span>
<span id="cb1-108"><a href="#cb1-108"></a></span>
<span id="cb1-109"><a href="#cb1-109"></a>          gridindex<span class="op">++</span>;</span>
<span id="cb1-110"><a href="#cb1-110"></a>          </span>
<span id="cb1-111"><a href="#cb1-111"></a>          <span class="dt">remaining_time=</span><span class="kw">round</span>((indexmax<span class="op">-</span>gridindex)<span class="op">*</span>(<span class="kw">today</span>()<span class="op">-</span>start_time)<span class="op">/</span>gridindex<span class="op">/</span><span class="dv">60</span>);</span>
<span id="cb1-112"><a href="#cb1-112"></a>            <span class="kw">caption</span>(<span class="kw">char</span>(bi)<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(numodindex)<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(afrindex)<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(repindex)<span class="op">||</span><span class="st">&quot; out of &quot;</span></span>
<span id="cb1-113"><a href="#cb1-113"></a>            <span class="op">||</span><span class="kw">char</span>(<span class="kw">nitems</span>(betalist))<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(<span class="kw">nitems</span>(num_drives_per_system_list))<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(<span class="kw">nitems</span>(AFRlist))<span class="op">||</span><span class="st">&quot;_&quot;</span><span class="op">||</span><span class="kw">char</span>(<span class="kw">nitems</span>(repair_timelist))<span class="op">||</span><span class="st">&quot;  &quot;</span><span class="op">||</span><span class="kw">char</span>(remaining_time)<span class="op">||</span><span class="st">&quot; mins to go&quot;</span>);</span>
<span id="cb1-114"><a href="#cb1-114"></a>            <span class="dt">AFRmx=</span>AFRlist[afrindex];</span>
<span id="cb1-115"><a href="#cb1-115"></a>            <span class="dt">AFR=</span><span class="dv">100</span><span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>(<span class="dv">1</span><span class="op">-</span>AFRmx<span class="op">/</span><span class="dv">100</span>)<span class="op">^</span>(<span class="dv">1</span><span class="op">/</span>max_year));</span>
<span id="cb1-116"><a href="#cb1-116"></a>            <span class="dt">repair_time=</span>repair_timelist[repindex];</span>
<span id="cb1-117"><a href="#cb1-117"></a>            <span class="dt">alpha=</span><span class="kw">round</span>(<span class="op">-</span><span class="dv">365</span><span class="op">/</span><span class="kw">log</span>(<span class="dv">1</span><span class="op">-</span>AFR<span class="op">/</span><span class="dv">100</span>)); <span class="op">/</span><span class="er">/</span><span class="st"> </span>this is <span class="cf">in</span> days</span>
<span id="cb1-118"><a href="#cb1-118"></a>            <span class="dt">num_simulations=</span><span class="dv">4</span><span class="op">*</span><span class="dv">10</span><span class="op">^</span><span class="kw">Floor</span>(<span class="dv">7</span><span class="op">-</span><span class="kw">LOG10</span>(num_drives_per_system));</span>
<span id="cb1-119"><a href="#cb1-119"></a>        </span>
<span id="cb1-120"><a href="#cb1-120"></a>            <span class="kw">print</span>(<span class="st">&quot;number of drives:&quot;</span><span class="op">||</span><span class="kw">char</span>(num_simulations<span class="op">*</span>num_drives_per_system));</span>
<span id="cb1-121"><a href="#cb1-121"></a>            <span class="op">/</span><span class="er">/</span><span class="kw">throw</span>();</span>
<span id="cb1-122"><a href="#cb1-122"></a>            <span class="dt">simstart=</span><span class="kw">today</span>();</span>
<span id="cb1-123"><a href="#cb1-123"></a>            <span class="kw">calc_reli</span>();</span>
<span id="cb1-124"><a href="#cb1-124"></a>            <span class="dt">simend=</span><span class="kw">today</span>();</span>
<span id="cb1-125"><a href="#cb1-125"></a>            <span class="kw">print</span>(<span class="kw">char</span>(<span class="kw">round</span>(simend<span class="op">-</span>simstart))<span class="op">||</span><span class="st">&quot; seconds&quot;</span>);</span>
<span id="cb1-126"><a href="#cb1-126"></a>            <span class="cf">for</span>(<span class="dt">mms=</span><span class="dv">1</span>,mms<span class="op">&lt;=</span><span class="dv">12</span><span class="op">/</span>stepsize<span class="op">*</span>max_year,mms<span class="op">++</span>,</span>
<span id="cb1-127"><a href="#cb1-127"></a>                <span class="dt">mm=</span>stepsize<span class="op">*</span>mms; <span class="op">/</span><span class="er">/</span>do this quarterly to speed up</span>
<span id="cb1-128"><a href="#cb1-128"></a>                <span class="cf">for</span>(<span class="dt">rr=</span><span class="dv">1</span>,rr<span class="op">&lt;=</span><span class="kw">nitems</span>(redundancy),rr<span class="op">++</span>,</span>
<span id="cb1-129"><a href="#cb1-129"></a>                    <span class="dt">failure_perc_table=</span>big_failure_perc_table[mms];</span>
<span id="cb1-130"><a href="#cb1-130"></a>                    dtsum<span class="op">&lt;</span><span class="er">&lt;</span>add <span class="kw">rows</span>(<span class="dv">1</span>);index<span class="op">++</span>;</span>
<span id="cb1-131"><a href="#cb1-131"></a>                    <span class="kw">column</span>(<span class="st">&quot;redundancy&quot;</span>)[index]=redundancy[rr];</span>
<span id="cb1-132"><a href="#cb1-132"></a>                    <span class="kw">column</span>(<span class="st">&quot;time(months)&quot;</span>)[index]=mm;</span>
<span id="cb1-133"><a href="#cb1-133"></a>                    <span class="kw">column</span>(<span class="st">&quot;system failure(%)&quot;</span>)[index]=failure_perc_table[rr];</span>
<span id="cb1-134"><a href="#cb1-134"></a>                    <span class="kw">column</span>(<span class="st">&quot;AFR(%)&quot;</span>)[index]=AFR;</span>
<span id="cb1-135"><a href="#cb1-135"></a>                    <span class="kw">column</span>(<span class="st">&quot;repair_time(days)&quot;</span>)[index]=repair_time;</span>
<span id="cb1-136"><a href="#cb1-136"></a>                    <span class="op">:</span>total_num_of_drives[index]=num_drives_per_system;</span>
<span id="cb1-137"><a href="#cb1-137"></a>                    <span class="op">:</span>simulation_size[index]=num_simulations;</span>
<span id="cb1-138"><a href="#cb1-138"></a>                    <span class="op">:</span>simulation_duration[index]=<span class="kw">round</span>(simend<span class="op">-</span>simstart);</span>
<span id="cb1-139"><a href="#cb1-139"></a>                    <span class="op">:</span>beta[index]=betav;</span>
<span id="cb1-140"><a href="#cb1-140"></a>                    </span>
<span id="cb1-141"><a href="#cb1-141"></a>                );</span>
<span id="cb1-142"><a href="#cb1-142"></a>            );</span>
<span id="cb1-143"><a href="#cb1-143"></a>            <span class="op">/</span><span class="er">/</span><span class="kw">throw</span>();</span>
<span id="cb1-144"><a href="#cb1-144"></a>            <span class="dt">newname=</span><span class="kw">substitute</span>(<span class="kw">substitute</span>(<span class="kw">MDYHMS</span>(<span class="kw">today</span>()),<span class="st">&quot;/&quot;</span>,<span class="st">&quot;_&quot;</span>),<span class="st">&quot;:&quot;</span>,<span class="st">&quot;_&quot;</span>);</span>
<span id="cb1-145"><a href="#cb1-145"></a>            dtsum<span class="op">&lt;</span><span class="er">&lt;</span><span class="kw">save</span>(<span class="st">&quot;C:\Users\451516\my_codes</span><span class="ch">\e</span><span class="st">rasure_coded_storage_system_analysis\EC reli MC simulation results_&quot;</span><span class="op">||</span>newname<span class="op">||</span><span class="st">&quot;.jmp&quot;</span>);</span>
<span id="cb1-146"><a href="#cb1-146"></a>        );</span>
<span id="cb1-147"><a href="#cb1-147"></a>    );</span>
<span id="cb1-148"><a href="#cb1-148"></a>    );</span>
<span id="cb1-149"><a href="#cb1-149"></a>);</span>
<span id="cb1-150"><a href="#cb1-150"></a></span>
<span id="cb1-151"><a href="#cb1-151"></a></span>
<span id="cb1-152"><a href="#cb1-152"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;alpha&quot;</span>,<span class="kw">formula</span>(<span class="kw">round</span>(<span class="op">-</span><span class="fl">365.25</span><span class="op">/</span><span class="kw">log</span>(<span class="dv">1</span><span class="op">-</span><span class="kw">Name</span>(<span class="st">&quot;AFR(%)&quot;</span>)<span class="op">/</span><span class="dv">100</span>))));</span>
<span id="cb1-153"><a href="#cb1-153"></a></span>
<span id="cb1-154"><a href="#cb1-154"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;beta_sys&quot;</span>,<span class="kw">formula</span>((<span class="op">:</span>redundancy<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>(<span class="op">:</span>beta<span class="dv">-1</span>)<span class="op">+</span><span class="dv">1</span>));</span>
<span id="cb1-155"><a href="#cb1-155"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;alpha_sys&quot;</span>,<span class="kw">formula</span>( ((<span class="kw">Name</span>(<span class="st">&quot;repair_time(days)&quot;</span>)<span class="op">^</span><span class="er">:</span>redundancy)<span class="op">*</span>(<span class="kw">factorial</span>(<span class="op">:</span>total_num_of_drives)<span class="op">/</span>(<span class="kw">factorial</span>(<span class="op">:</span>total_num_of_drives<span class="op">-</span><span class="er">:</span>redundancy<span class="dv">-1</span>)</span>
<span id="cb1-156"><a href="#cb1-156"></a>                                       <span class="op">*</span><span class="kw">factorial</span>(<span class="op">:</span>redundancy)))<span class="op">*</span>(<span class="op">:</span>beta<span class="op">^</span>(<span class="op">:</span>redundancy<span class="op">+</span><span class="dv">1</span>)<span class="op">/</span><span class="er">:</span>alpha<span class="op">^</span>(<span class="op">:</span>beta<span class="op">*</span>(<span class="op">:</span>redundancy<span class="op">+</span><span class="dv">1</span>)))<span class="op">*</span><span class="dv">1</span><span class="op">/</span>(<span class="op">:</span>beta_sys))<span class="op">^</span>(<span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="er">:</span>beta_sys)));</span>
<span id="cb1-157"><a href="#cb1-157"></a></span>
<span id="cb1-158"><a href="#cb1-158"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;theory_system failure(%)&quot;</span>,<span class="kw">formula</span>(<span class="dv">100</span><span class="op">*</span>(<span class="dv">1</span><span class="op">-</span><span class="kw">Exp</span>( <span class="op">-</span>(<span class="fl">365.25</span><span class="op">/</span><span class="er">:</span>alpha_sys<span class="op">*</span><span class="er">:</span><span class="kw">Name</span>( <span class="st">&quot;time(months)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">12</span>)<span class="op">^</span><span class="er">:</span>beta_sys ))));</span>
<span id="cb1-159"><a href="#cb1-159"></a></span>
<span id="cb1-160"><a href="#cb1-160"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;theory_system_reli&quot;</span>,<span class="kw">formula</span>(<span class="dv">1</span><span class="op">-</span><span class="st"> </span><span class="er">:</span><span class="kw">Name</span>( <span class="st">&quot;theory_system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> ));</span>
<span id="cb1-161"><a href="#cb1-161"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;theory_num_of_nines&quot;</span>,<span class="kw">formula</span>(<span class="kw">floor</span>(<span class="op">-</span><span class="kw">Log10</span>( <span class="op">:</span><span class="kw">Name</span>( <span class="st">&quot;theory_system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> ))));</span>
<span id="cb1-162"><a href="#cb1-162"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span>new <span class="kw">column</span>(<span class="st">&quot;theory_num_of_nines_&quot;</span>,<span class="kw">formula</span>(<span class="op">-</span><span class="kw">Log10</span>( <span class="op">:</span><span class="kw">Name</span>( <span class="st">&quot;theory_system failure(%)&quot;</span> ) <span class="op">/</span><span class="st"> </span><span class="dv">100</span> )));</span>
<span id="cb1-163"><a href="#cb1-163"></a></span>
<span id="cb1-164"><a href="#cb1-164"></a><span class="op">:</span>redundancy<span class="op">&lt;</span><span class="er">&lt;</span>modeling <span class="kw">type</span>(nominal);</span>
<span id="cb1-165"><a href="#cb1-165"></a>newname=<span class="kw">substitute</span>(<span class="kw">substitute</span>(<span class="kw">MDYHMS</span>(<span class="kw">today</span>()),<span class="st">&quot;/&quot;</span>,<span class="st">&quot;_&quot;</span>),<span class="st">&quot;:&quot;</span>,<span class="st">&quot;_&quot;</span>);</span>
<span id="cb1-166"><a href="#cb1-166"></a></span>
<span id="cb1-167"><a href="#cb1-167"></a>notein=<span class="st">&quot;This data table is created by &quot;</span><span class="op">||</span>scr_path<span class="op">||</span>scr_name<span class="op">||</span><span class="st">&quot;.jsl on&quot;</span><span class="op">||</span><span class="kw">char</span>( As <span class="kw">Date</span>(<span class="kw">Today</span>()););</span>
<span id="cb1-168"><a href="#cb1-168"></a>dtsum <span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span>New Table <span class="kw">Variable</span>( <span class="st">&quot;Notes&quot;</span>,notein  );</span>
<span id="cb1-169"><a href="#cb1-169"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span>new <span class="kw">column</span>(<span class="st">&quot;Notes&quot;</span>);</span>
<span id="cb1-170"><a href="#cb1-170"></a><span class="op">:</span>Notes[<span class="dv">1</span>]=notein; <span class="op">/</span><span class="er">/</span>this table will go into CSV. Just add a column to keep the info</span>
<span id="cb1-171"><a href="#cb1-171"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span><span class="st"> </span>new <span class="kw">column</span>(<span class="st">&quot;Date&quot;</span>);</span>
<span id="cb1-172"><a href="#cb1-172"></a>thisdate=<span class="kw">substitute</span>(<span class="kw">substitute</span>(<span class="kw">MDYHMS</span>(<span class="kw">today</span>()),<span class="st">&quot;/&quot;</span>,<span class="st">&quot;_&quot;</span>),<span class="st">&quot;:&quot;</span>,<span class="st">&quot;_&quot;</span>);</span>
<span id="cb1-173"><a href="#cb1-173"></a><span class="op">:</span>Date[<span class="dv">1</span>]<span class="op">==</span>thisdate;</span>
<span id="cb1-174"><a href="#cb1-174"></a></span>
<span id="cb1-175"><a href="#cb1-175"></a></span>
<span id="cb1-176"><a href="#cb1-176"></a>dtsum<span class="op">&lt;</span><span class="er">&lt;</span><span class="kw">save</span>(<span class="st">&quot;C:\Users\451516\my_codes</span><span class="ch">\e</span><span class="st">rasure_coded_storage_system_analysis\EC reli MC simulation results generic beta &quot;</span><span class="op">||</span>newname<span class="op">||</span><span class="st">&quot;.jmp&quot;</span>);</span>
<span id="cb1-177"><a href="#cb1-177"></a></span>
<span id="cb1-178"><a href="#cb1-178"></a></span>
<span id="cb1-179"><a href="#cb1-179"></a>duration=<span class="kw">char</span>(<span class="kw">floor</span>((<span class="kw">today</span>()<span class="op">-</span>start_time)<span class="op">/</span><span class="dv">60</span>))<span class="op">||</span><span class="st">&quot; minutes&quot;</span>;</span>
<span id="cb1-180"><a href="#cb1-180"></a><span class="kw">Bivariate</span>(</span>
<span id="cb1-181"><a href="#cb1-181"></a>    <span class="kw">Y</span>( <span class="op">:</span>MC_num_of_nines_ ),</span>
<span id="cb1-182"><a href="#cb1-182"></a>    <span class="kw">X</span>( <span class="op">:</span>theory_num_of_nines_ ),</span>
<span id="cb1-183"><a href="#cb1-183"></a>    Fit <span class="kw">Special</span>( <span class="kw">Intercept</span>( <span class="dv">0</span> ), <span class="kw">Slope</span>( <span class="dv">1</span> ), {Line <span class="kw">Color</span>( {<span class="dv">212</span>, <span class="dv">73</span>, <span class="dv">88</span>} )} ),</span>
<span id="cb1-184"><a href="#cb1-184"></a>    <span class="kw">SendToReport</span>(</span>
<span id="cb1-185"><a href="#cb1-185"></a>        <span class="kw">Dispatch</span>(</span>
<span id="cb1-186"><a href="#cb1-186"></a>            {},</span>
<span id="cb1-187"><a href="#cb1-187"></a>            <span class="st">&quot;1&quot;</span>,</span>
<span id="cb1-188"><a href="#cb1-188"></a>            ScaleBox,</span>
<span id="cb1-189"><a href="#cb1-189"></a>            {Label <span class="kw">Row</span>( {Show Major <span class="kw">Grid</span>( <span class="dv">1</span> ), Show Minor <span class="kw">Grid</span>( <span class="dv">1</span> )} )}</span>
<span id="cb1-190"><a href="#cb1-190"></a>        ),</span>
<span id="cb1-191"><a href="#cb1-191"></a>        <span class="kw">Dispatch</span>(</span>
<span id="cb1-192"><a href="#cb1-192"></a>            {},</span>
<span id="cb1-193"><a href="#cb1-193"></a>            <span class="st">&quot;2&quot;</span>,</span>
<span id="cb1-194"><a href="#cb1-194"></a>            ScaleBox,</span>
<span id="cb1-195"><a href="#cb1-195"></a>            {Label <span class="kw">Row</span>( {Show Major <span class="kw">Grid</span>( <span class="dv">1</span> ), Show Minor <span class="kw">Grid</span>( <span class="dv">1</span> )} )}</span>
<span id="cb1-196"><a href="#cb1-196"></a>        ),</span>
<span id="cb1-197"><a href="#cb1-197"></a>        <span class="kw">Dispatch</span>(</span>
<span id="cb1-198"><a href="#cb1-198"></a>            {},</span>
<span id="cb1-199"><a href="#cb1-199"></a>            <span class="st">&quot;Bivar Plot&quot;</span>,</span>
<span id="cb1-200"><a href="#cb1-200"></a>            FrameBox,</span>
<span id="cb1-201"><a href="#cb1-201"></a>            {Row <span class="kw">Legend</span>(</span>
<span id="cb1-202"><a href="#cb1-202"></a>                redundancy,</span>
<span id="cb1-203"><a href="#cb1-203"></a>                <span class="kw">Color</span>( <span class="dv">1</span> ),</span>
<span id="cb1-204"><a href="#cb1-204"></a>                Color <span class="kw">Theme</span>( <span class="st">&quot;JMP Default&quot;</span> ),</span>
<span id="cb1-205"><a href="#cb1-205"></a>                <span class="kw">Marker</span>( <span class="dv">0</span> ),</span>
<span id="cb1-206"><a href="#cb1-206"></a>                Marker <span class="kw">Theme</span>( <span class="st">&quot;&quot;</span> ),</span>
<span id="cb1-207"><a href="#cb1-207"></a>                Continuous <span class="kw">Scale</span>( <span class="dv">0</span> ),</span>
<span id="cb1-208"><a href="#cb1-208"></a>                Reverse <span class="kw">Scale</span>( <span class="dv">0</span> ),</span>
<span id="cb1-209"><a href="#cb1-209"></a>                Excluded <span class="kw">Rows</span>( <span class="dv">0</span> )</span>
<span id="cb1-210"><a href="#cb1-210"></a>            )}</span>
<span id="cb1-211"><a href="#cb1-211"></a>        )</span>
<span id="cb1-212"><a href="#cb1-212"></a>    )</span>
<span id="cb1-213"><a href="#cb1-213"></a>)</span></code></pre></div>
</div>
<div id="plotref_markovsim">
<iframe seamless src="markovsim.html" width="100%" height="500" class="boxer">
</iframe>
<div style="margin-top:-8px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="The comparison of theory vs Monte Carlo results with various input parameters. Number of nines is defined in Eq. &lt;span class='myeqref'&gt; \@ref(eq:nondefinition) &lt;/span&gt; where flooring is omitted. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt;  The parameters swept are: redundancy($c$) $\in$ {0, 1}, AFR(%) $\in$ {1}, $\beta \in$ {1, 1.2},total number of drives $\in$ {8} and repair time(days) $\in$ {1.4}. &lt;/span&gt;" width="0.01%" />
<p class="caption">
The comparison of theory vs Monte Carlo results with various input parameters. Number of nines is defined in Eq. <span class="myeqref"> @ref(eq:nondefinition) </span> where flooring is omitted. <span class="plus">… [+]</span> <span class="expanded-caption"> The parameters swept are: redundancy(<span class="math inline">\(c\)</span>) <span class="math inline">\(\in\)</span> {0, 1}, AFR(%) <span class="math inline">\(\in\)</span> {1}, <span class="math inline">\(\beta \in\)</span> {1, 1.2},total number of drives <span class="math inline">\(\in\)</span> {8} and repair time(days) <span class="math inline">\(\in\)</span> {1.4}. </span>
</p>
</div>
</div>
</div>
</div>
<!--chapter:end:markovchains.Rmd-->
</section></section>
<section id="ures" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>Silent data corruption (URE)</h1><div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
UREs may arise due to thermal decays of bits. They are discovered only when data [is attempted to be] read.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
It is defined as the probability of a corrupted sector <b>per bits </b> read. A typical value is <span class="math inline">\(10^{-15}\)</span>.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
With tens of TBs data, observing at least one corrupted sector is very likely <span class="citation" data-cites="uerIliadis">[<a href="#/ref-uerIliadis" role="doc-biblioref">13</a>]</span>.
</li>
</ul>
</div>
<div class="fragment pbox">
<div style="margin-bottom:-25px">
<div id="plotref_uer" class="imgcont" style="display:block;display: inline-block;width:36%;margin-top:-0px;margin-bottom:-25px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/uer-1.svg" alt="Markov chain with one redundancy with UREs." width="768" />
<p class="caption">
Markov chain with one redundancy with UREs.
</p>
</div>
</div>
<div class="fragment" style="display: inline-block;width:62%;margin-top:-5px;margin-left:-5px;margin-bottom:-15px;">
<ul>
<li>
Figure on the left includes failures due to UREs.
</li>
<li class="fragment">
<span class="math display">\[\begin{equation}
S=\begin{bmatrix}
    s +n \lambda &amp; -\mu (1-h_{n-1}) &amp;0 \\
    -n\lambda &amp; s +(n-1)\lambda +\mu &amp;0\\
    0 &amp;-(n-1)\lambda -h_{n-1} \mu&amp; s
    \end{bmatrix}\nonumber
\end{equation}\]</span>
</li>
<li class="fragment">
<span class="math inline">\(h_{n-1}\)</span> is the probability of observing UER(s) in critical repairs:
</li>
</ul>
</div>
<div class="fragment">
<p><span class="math display">\[\begin{equation}
h_{n-1}\equiv1-(1-\rm{UER})^{N_\text{bits}}\simeq 1-e^{-UER\times N_\text{bits}}=1-e^{-UER\times (n-1)\times C_\text{bits}}(\#eq:hnmone)
\end{equation}\]</span></p>
</div>
</div>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">


<ul>
<li>
Finding the poles of the determinant we get: <span class="math inline">\(\frac{1}{{\rm MTTDL}}=\frac{\mu }{n\lambda[(n-1)\lambda]}+\frac{1}{1/(n\lambda)}h_{n-1}\)</span>
<ul>
<li class="fragment">
<font color="gray">This is an harmonic sum of MTTDLs for Drive failure mode and UER failure mode. </font>
</li>
<li class="fragment">
<font color="gray">The analysis can be extended to a generic <span class="math inline">\(c\)</span> redundancy: <span class="math inline">\(\frac{1}{{\rm MTTDL}_c}=\frac{1}{{\rm MTTDL}_{c,{\rm DF}}}+\frac{h_{n-1}}{{\rm MTTDL}_{c-1,{\rm DF}}}\)</span> </font>
</li>
</ul>
</li>
<li class="fragment">
For large data [<span class="math inline">\(UER\times (n-1)\times C_\text{bits}\gg1\)</span>], <span class="math inline">\(h_{n-1}\)</span> is significant, and the second term dominates the durability.
<ul>
<li class="fragment">
<font color="gray">Ex: <span class="math inline">\({\rm UER}=10^{-15}\)</span>, <span class="math inline">\(n=20\)</span> and <span class="math inline">\(C=10\)</span>TB <span class="math inline">\(\rightarrow h_{n-1}=1-(1-10^{-15})^{19*8*10^{13}}\simeq 1-e^{-1.52}=0.78.\)</span> </font>
</li>
</ul>
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Sector level data durability of an EC with <span class="math inline">\(c\)</span> parities is at the order of drive level durability with <span class="math inline">\(c-1\)</span> parities.
</li>
</ul>
</div>
<!--chapter:end:ures.Rmd--></section>
<section><section id="adaptslide" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>Distributed Parity (ADAPT)</h1><div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
Distributed raid (dRAID) uses all the drives in the pool to store data and parities.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
Rebuild is done by reading from all drives in the pool in parallel.
</li>
<div class="my_vspacersmall">

</div>
<li class="fragment">
ADAPT prioritizes the repair of critically damaged stripes<span class="citation" data-cites="draid">[<a href="#/ref-draid" role="doc-biblioref">9</a>]</span>. This is the main reason for reli gain.
</li>
<div class="my_vspacersmall">

</div>
</ul>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">

<div class="flexbox"  style="margin-bottom:-50px" >

<div id="plotref_venn_js" style="display: inline-block;width:30%">
<div id="venn" class="boxer" style="display: block;margin-top:5px;">

</div>
<div style="display: block;margin-top:-2px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="Venn Diagram of overlaps of 3 failures with 53-drive pool and EC size of 10." width="0" />
<p class="caption">
Venn Diagram of overlaps of 3 failures with 53-drive pool and EC size of 10.
</p>
</div>
</div>
</div>
<div style="width:70%;;margin-left:-1%">
<div id="plotref_adaptmarkov" class="imgcont fragment" style="margin-top:5px;margin-bottom:55px;width:80%;margin-left:10%">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/adaptmarkov-1.svg" alt="An approximate Markov chain for distributed parity of pool size $D$ and redundancy $2$.  &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; The recovery rates $\mu_1$ and $\mu_2$ are determined by the geometrical overlaps. ADAPT prioritizes recovering the critically damaged stripes, hence $\mu_2$ is very quick. &lt;/span&gt;" width="768" />
<p class="caption">
An approximate Markov chain for distributed parity of pool size <span class="math inline">\(D\)</span> and redundancy <span class="math inline">\(2\)</span>. <span class="plus">… [+]</span> <span class="expanded-caption"> The recovery rates <span class="math inline">\(\mu_1\)</span> and <span class="math inline">\(\mu_2\)</span> are determined by the geometrical overlaps. ADAPT prioritizes recovering the critically damaged stripes, hence <span class="math inline">\(\mu_2\)</span> is very quick. </span>
</p>
</div>
</div>
<ul class="fragment" style="margin-top:95px;margin-bottom:5px;margin-left:-15px">
<li>
Consider a system of pool-size <span class="math inline">\(D\)</span> and EC size <span class="math inline">\(N\)</span>, and redundancy <span class="math inline">\(c\)</span>.
<ul>
<li>
<font color="gray">The overlaps are calculated for <span class="math inline">\(D=53\)</span> and <span class="math inline">\(N=8+2\)</span>. </font>
</li>
<li>
<font color="gray">Geometric overlap areas scale with powers of <span class="math inline">\(N/D\)</span>. </font>
</li>
</ul>
</li>
<li class="fragment" style="margin-top:4px">
Recovery rates: <span class="math inline">\(\mu_1 \propto D\)</span> and <span class="math inline">\(\mu_2\propto D^2,\)</span> failure rate: <span class="math inline">\(\propto D\)</span>.
<ul>
<li>
<font color="gray">Increase in failure rate cancels with recovery speed up for <span class="math inline">\(c=1.\)</span> </font>
</li>
<li>
<font color="gray">Reli will benefit from ADAPT only if <span class="math inline">\(c\geq2\)</span>. </font>
</li>
</ul>
</li>
<li class="fragment" style="margin-top:5px">
ADAPT Reli can be expressed in terms of its RAID counterpart:
<ul>
<li>
<font color="gray"><span class="math inline">\({\rm MTTDL}_{{\rm dRAID}}=\left[\frac{D}{N}\right]^{\frac{c(c-1)}{2}} {\rm MTTDL}_{{\rm RAID}}\)</span>.</font>
</li>
</ul>
</li>
<li class="fragment" style="margin-top:5px">
For <span class="math inline">\(D=50\)</span>, <span class="math inline">\(N=10\)</span>, and <span class="math inline">\(c=2\)</span>: Adapt reli is 5x better than RAID6 reli.
</li>
</ul>
</div>
</div>
</div></section><section id="damageslide" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png">
<h2>Visualizing the damage</h2>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">
<div id="plotref_sankey_js">
<div class="boxer">
<div style="display: inline-block;width: 90%;margin-left:5%; ;margin-top:30px;">
<div id="slider-direction" class="regular-slider" style="margin-top: 1em;margin-left: 1em">

</div>
<div class="slider_label" style="text-align: center;margin-top: 1em;font-size:20px">
Stripe length(left) and Pool Size(right)
</div>
</div>
<div id="sankey_multiple" style="width: 95%;margin-left:5%; height: 400px;margin-top:20px;margin-left:auto;margin-right:auto; text-align:center">

</div>
</div>
<div style="margin-top:430">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="A Sankey Diagram of stripe degradation percentages with +2 Erasure coding. Hover on the image to see the numbers. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; As the pool size increases, any given set of failed drives will have less and less overlap. This reduces the relative size of the critically damaged stripes enabling a quick recovery from this most vulnerable state. &lt;/span&gt;" width="0" />
<p class="caption">
A Sankey Diagram of stripe degradation percentages with +2 Erasure coding. Hover on the image to see the numbers. <span class="plus">… [+]</span> <span class="expanded-caption"> As the pool size increases, any given set of failed drives will have less and less overlap. This reduces the relative size of the critically damaged stripes enabling a quick recovery from this most vulnerable state. </span>
</p>
</div>
</div>
</div>
</div>
<script type="text/javascript">
  google.charts.load("current", {packages:["sankey"]});
  google.charts.setOnLoadCallback(drawChart);
   function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'From');
    data.addColumn('string', 'To');
    data.addColumn('number', 'Weight');
    var stripesize=directionSlider.noUiSlider.get()[0];
    var poolsize=directionSlider.noUiSlider.get()[1];
    var strike0=stripesize/poolsize
    var strike1=(stripesize-1)/(poolsize-1)
    var strike2=(stripesize-2)/(poolsize-2)
    data.addRows([
      
       [ 'Fully Redundant', 'Fully Redundant ', Math.round((1-strike0)*1000)/10 ], 
       [ 'Fully Redundant', '1-DEGRADED', Math.round(strike0*1000)/10 ],

       [ 'Fully Redundant ', 'Fully Redundant  ', Math.round(1000*(1-strike0)*(1-strike1))/10 ], 
       [ 'Fully Redundant ', '1-DEGRADED ', Math.round(1000*(1-strike0)*strike1)/10  ],
       [ '1-DEGRADED', '2-DEGRADED', Math.round(strike0*strike1*1000)/10  ],
       [ '1-DEGRADED', '1-DEGRADED ', Math.round(strike0*(1-strike1)*1000)/10  ],
  

       [ 'Fully Redundant  ', 'Fully Redundant   ', Math.round(1000*(1-strike0)*(1-strike1)*(1-strike2))/10 ], 
       [ 'Fully Redundant  ', '1-DEGRADED  ', Math.round(1000*(1-strike0)*(1-strike1)*(strike2))/10 ],  
       [ '1-DEGRADED ', '1-DEGRADED  ', Math.round(1000*((1-strike0)*strike1+strike0*(1-strike1))*(1-strike2))/10 ],
       [ '1-DEGRADED ', '2-DEGRADED ', Math.round(1000*((1-strike0)*strike1+strike0*(1-strike1))*(strike2))/10 ],

       [ '2-DEGRADED', '2-DEGRADED ', Math.round(1000*strike0*strike1*(1-strike2))/10 ],
       [ '2-DEGRADED', '3-DEGRADED', Math.round(1000*strike0*strike1*(strike2))/10  ],

  

      
    ]);

    // Set chart options
    var options = {
      width: 600,
    };

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.Sankey(document.getElementById('sankey_multiple'));
    chart.draw(data);
   }
</script>
<script>
var directionSlider = document.getElementById('slider-direction');
 
noUiSlider.create(directionSlider, {
// two handles
    start: [10, 53],
    // they are connected
    step:1,
    connect: true,
    // their minimal difference is 5 - this makes sense, because we want the user to always find items
    // tooltip for handle 1 and handle 2
    tooltips: [wNumb({decimals: 0}),wNumb({decimals: 0})],
    pips: {
        mode: 'range',
        density: 5
        //,        format: dollarPrefixFormat
    },
    // start and end point of the slider - we are going to calculate that later based on a set of items
    range: {min: 10, max: 106}
});

    
directionSlider.noUiSlider.on('update', function( values, handle ) {drawChart()   });
    
</script>
<script>
   function drawvenn() {
var chart = venn.VennDiagram()
                 .width(400)
                 .height(400);

var div = d3.select("#venn")
var poolsize=53
var stripesize=10
var onedamage= Math.round(1000*stripesize/poolsize)/10
var doubledamage= Math.round(1000*stripesize/poolsize*((stripesize-1)/(poolsize-1)))/10
var tripledamage= Math.round(1000*stripesize/poolsize*((stripesize-1)/(poolsize-1))*((stripesize-2)/(poolsize-2)))/10

var sets = [{sets:["POOL"], size: 100},
{sets: ["POOL", "Failure1"], figure: 10, label: "", size: onedamage},
{sets: ["POOL", "Failure2"], figure: 10, label: "", size: onedamage},
{sets: ["POOL", "Failure3"], figure: 10, label: "", size: onedamage},
            {sets:["Failure1"], figure:10, label: "Failure1", size:onedamage},
            {sets:["Failure2"], figure: 10, label: "Failure2", size:onedamage},
            {sets:["Failure3"], figure: 10, label: "Failure3", size:onedamage},
            {sets: ["Failure1", "Failure2"], figure: 5, label: "F1&F2", size: doubledamage},
            {sets: ["Failure1", "Failure3"], figure: 5, label: "F1&F3", size: doubledamage},
            {sets: ["Failure2", "Failure3"], figure: 5, label: "F2&F3", size: doubledamage},
            {sets: ["Failure1", "Failure2", "Failure3"], figure: 10, label: "F1,F2&F3", size: tripledamage}
]
div.datum(sets).call(chart);

var tooltip = d3.select("body").append("div")
    .attr("class", "venntooltip");

div.selectAll("path")
    .style("stroke-opacity", 0)
    .style("stroke", "#fff")
    .style("stroke-width", 3)

div.selectAll("g")
    .on("mouseover", function(d, i) {
        // sort all the areas relative to the current item
        venn.sortAreas(div, d);

        // Display a tooltip with the current size
        tooltip.transition().duration(400).style("opacity", .9);
        tooltip.text(d.size + " %");

        // highlight the current path
        var selection = d3.select(this).transition("tooltip").duration(400);
        selection.select("path")
            .style("fill-opacity", d.sets.length == 1 ? .4 : .1)
            .style("stroke-opacity", 1);
    })

    .on("mousemove", function() {
        tooltip.style("left", (d3.event.pageX) + "px")
               .style("top", (d3.event.pageY - 28) + "px");
    })

    .on("mouseout", function(d, i) {
        tooltip.transition().duration(400).style("opacity", 0);
        var selection = d3.select(this).transition("tooltip").duration(400);
        selection.select("path")
            .style("fill-opacity", d.sets.length == 1 ? .25 : .0)
            .style("stroke-opacity", 0);
    });
    }  
drawvenn()    
</script>
<!--chapter:end:adapt.Rmd-->
</section></section>
<section id="mlayer" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>Modeling Multi-Layer Erasure Coding</h1><div class="myclassifier_Detailed_Advanced_Presentation fragment pbox" style="height:40px">
<p style="margin-top:-10px">
The overall data durability can be improved by implementing another layer of erasure coding. Top layer is composed of already erasure coded sub-elements.
</p>
</div>
<div class="fragment pbox">
<div class="imgcont" style="margin-top:-5px;;margin-bottom:5px;padding-bottom:5px;width:45%;display:inline-block">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovibox-1.svg" alt="Left: the first layer of the overall erasure coding of size $n$ and $c$ reduncies.&lt;br&gt; Right: A block diagram representation of the erasure coded system as a single element. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; The system will lose data when $c+1$ drive failures or $c$ drive failures and URE(s) are encountered. These two cases are characterized by the rates $\Lambda^{\rm DG} =\Lambda^{\rm DG}(c)=\left(\frac{\lambda}{\mu}\right)^c \frac{\lambda n! }{(n-c-1)!}$ and $\Lambda^{\rm U} =\Lambda^{\rm U}(c)=h_{n-c}\Lambda^{\rm DG}(c-1)$&lt;/span&gt;" width="100%" />
<p class="caption">
Left: the first layer of the overall erasure coding of size <span class="math inline">\(n\)</span> and <span class="math inline">\(c\)</span> reduncies.<br> Right: A block diagram representation of the erasure coded system as a single element. <span class="plus">… [+]</span> <span class="expanded-caption"> The system will lose data when <span class="math inline">\(c+1\)</span> drive failures or <span class="math inline">\(c\)</span> drive failures and URE(s) are encountered. These two cases are characterized by the rates <span class="math inline">\(\Lambda^{\rm DG} =\Lambda^{\rm DG}(c)=\left(\frac{\lambda}{\mu}\right)^c \frac{\lambda n! }{(n-c-1)!}\)</span> and <span class="math inline">\(\Lambda^{\rm U} =\Lambda^{\rm U}(c)=h_{n-c}\Lambda^{\rm DG}(c-1)\)</span></span>
</p>
</div>
</div>
<div class="imgcont fragment" style="margin-top:-5px;;margin-bottom:5px;padding-bottom:5px;width:35%;margin-left:10%; display:inline-block">
<div class="figure" style="text-align: center">
<img src="duck2.jpg" alt="Calm on the surface, but always paddling like hell underneath. A lot of data paddling inside the enclosure, but from outside, it is just a very reliable petabyte drive." width="50%" />
<p class="caption">
Calm on the surface, but always paddling like hell underneath. A lot of data paddling inside the enclosure, but from outside, it is just a very reliable petabyte drive.
</p>
</div>
</div>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">
<div class="flexbox" style="margin-bottom:-50px">
<div class="imgcont" style="margin-top:5px;;margin-bottom:5px;padding-bottom:40px;width:45%">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovtop-1.svg" alt="Top layer EC of size $m$ and $d$ reduncies built with self-erasure coded elements." width="100%" />
<p class="caption">
Top layer EC of size <span class="math inline">\(m\)</span> and <span class="math inline">\(d\)</span> reduncies built with self-erasure coded elements.
</p>
</div>
</div>
<div class="myclassifier_Presentation" style="margin-top:-35px;margin-left:30px;margin-bottom:15px;padding-bottom:5px;width:55%">
<p><span class="math display">\[\begin{eqnarray}
\frac{1}{{\rm MTTDL}^{\rm t}_d}&amp;=&amp;\frac{1}{{\rm MTTDL}^{\rm t}_{d,{\rm DG}}}+\frac{h^{\rm t}_{m-d}}{{\rm MTTDL}^{\rm t}_{d-1,{\rm DG}}}\nonumber
\end{eqnarray}\]</span></p>
<p><span class="math display">\[\begin{eqnarray}
{\rm   MTTDL}^{\rm t}_{d,{\rm DG}} &amp;=&amp;\left(\frac{\mu_{\rm t}}{ \Lambda^{\rm DG}}\right)^d \frac{(m-d-1)!}{ \Lambda^{\rm DG} m!},\nonumber
\end{eqnarray}\]</span> <span class="math inline">\(h^{\rm t}_{m-d}=1-(1-{\rm UER})^{(n-c)(m-d)C}\)</span> probability of URE(s).</p>
</div>
<div class="myclassifier_Detailed_Advanced">
<p><span class="math display">\[\begin{eqnarray}
\frac{1}{{\rm MTTDL}^{\rm t}_d}&amp;=&amp;\frac{1}{{\rm MTTDL}^{\rm t}_{d,{\rm DG}}}+\frac{h^{\rm t}_{m-d}}{{\rm MTTDL}^{\rm t}_{d-1,{\rm DG}}}
\end{eqnarray}\]</span></p>
<p><span class="math display">\[\begin{eqnarray}
{\rm   MTTDL}^{\rm t}_{d,{\rm DG}} &amp;=&amp;\left(\frac{\mu_{\rm t}}{ \Lambda^{\rm DG}}\right)^d \frac{(m-d-1)!}{ \Lambda^{\rm DG} m!},
\end{eqnarray}\]</span> <span class="math inline">\(h^{\rm t}_{m-d}=1-(1-{\rm UER})^{(n-c)(m-d)C}\)</span> probability of URE(s)<br> during the critical top layer repairs.</p>
</div>
</div>
</div>
<div class="myclassifier_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
16+2+Adapt (53-drive-pool) &amp; 7+1 CORTX gives ~13 nines at the overall 73% capacity efficiency(27% overhead).
</li>
<li class="fragment">
~12 nines can be reached with an 8+5 single layer EC at 62% capacity efficiency (38% overhead).
</li>
</ul>
</div>
<!--chapter:end:multilayer.Rmd--></section>
<section id="sysav" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg"><h1>System Availability</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="insidetitle" style="margin-top:-10px;">
Availability with no redundancy
</div>
<div class="flexbox">
<div id="plotref_mtbf" class="imgcont" style="display:block;display: inline-block;width:30%;margin-top:-2px;margin-bottom:2px;margin-left:-5px">
<div class="figure" style="text-align: center">
<img src="mtbf.png" alt="An illustration of the time scales." width="100%" />
<p class="caption">
An illustration of the time scales.
</p>
</div>
</div>
<div style="display:block;display: inline-block;width:78%;margin-top:-2px;margin-bottom:2px;margin-left:-5px">
<ul>
<li class="fragment">
A set of <span class="math inline">\(n\)</span> devices:
<div class="regulartooltip topline">
MTTF <span class="regulartooltiptext">Mean Time To Failure (at the order of 100K hours)</span>
</div>
<span class="math inline">\(=1/(n \lambda_s),\)</span> and
<div class="regulartooltip topline">
MTTR <span class="regulartooltiptext">Mean Time To Repair (at the order of 10 hours)</span>
</div>
<span class="math inline">\(=1/\mu_s.\)</span>
</li>
<li class="fragment">
Fraction of time spent for repair: <span class="math inline">\(\frac{{\rm MTTR}}{{\rm MTTF}+{\rm MTTR} }\simeq \frac{{\rm MTTR}}{{\rm MTTF}}=\frac{n\lambda_s}{\mu_s}\)</span>.
</li>
<li class="fragment" style="margin-top:-4px">
<p style="display:inline-block;">
Availability=1-Fraction of time spent for repair:
</p>
<div style="display:inline-block;width:10%;height:60px;margin-top: -80px;">
<p><span class="math display">\[\begin{equation}
A_0 \simeq1-\frac{n \lambda_s}{\mu_s}.(\#eq:a0pre)
\end{equation}\]</span></p>
</div>
</li>
</ul>
</div>
</div>
<div class="collapsible_container fragment">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:10px">
Show a rigorous proof
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-34px;margin-bottom:-8px">
Hide
</button>
<div class="experience__more sourceCode r" style=";margin-top:10px;">
<p>Consider the Markov chain representation below:</p>
<div id="plotref_markovzeroredundancya" class="imgcont" style="display:block;display: inline-block;width:31%;margin-left:35%;margin-top:2px;margin-bottom:-8px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovzeroredundancya-1.svg" alt="\label{fig:markovzeroredundancya} Markov Chain with no redundancy." width="20%" />
<p class="caption">
 Markov Chain with no redundancy.
</p>
</div>
</div>
<p>The green arrow shows that even your system is down, you did not lose any data, you just need to repair it. This will make a lot of difference in the math. We will skip a couple of steps and start with the <span class="math inline">\(s\)</span>-matrix: <span class="math display">\[\begin{equation}
 \begin{bmatrix}
    s +n \lambda_s &amp; -\mu_s  \\
    -n \lambda_s &amp; s +\mu_s
  \end{bmatrix}
  \begin{bmatrix}
    P_{n}(s)   \\
   P_{n-1}(s)
  \end{bmatrix}= \begin{bmatrix}
    1  \\
  0
  \end{bmatrix},(\#eq:m0lap)
\end{equation}\]</span> which is solved by inverting the matrix <span class="math display">\[\begin{eqnarray}
  \begin{bmatrix}
    P_{n}(s)   \\
   P_{n-1}(s)
  \end{bmatrix}&amp;=&amp;
  \begin{bmatrix}
    s +n \lambda_s &amp; -\mu_s  \\
    -n \lambda_s &amp; s +\mu_s
  \end{bmatrix}^{-1}
 \begin{bmatrix}
    1  \\
  0
  \end{bmatrix}\nonumber\\
  &amp;=&amp; \frac{1}{1+\frac{n \lambda_s}{\mu_s}}\begin{bmatrix}
     \frac{1}{s}+\frac{n \lambda_s}{\mu_s}\frac{1}{s+(n \lambda_s+\mu_s)} \\
  \frac{n \lambda_s/\mu_s}{s}-\frac{n \lambda_s}{\mu_s}\frac{1}{s+(n \lambda_s+\mu_s)}  
  \end{bmatrix}.
  (\#eq:m0lap2)
\end{eqnarray}\]</span> Finally we inverse Laplace transform to get <span class="math display">\[\begin{equation}
  \begin{bmatrix}
    p_{n}(t)   \\
   p_{n-1}(t)
  \end{bmatrix}= \frac{1}{1+\frac{n \lambda_s}{\mu_s}}\begin{bmatrix}
     1+\frac{n \lambda_s}{\mu_s} e^{-(n \lambda_s+\mu_s)t} \\
  \frac{n \lambda_s}{\mu_s}-\frac{n \lambda_s}{\mu_s} e^{-(n \lambda_s+\mu_s)t} 
  \end{bmatrix}.(\#eq:m0a)
\end{equation}\]</span> Note that <span class="math inline">\(p_{n}(t) +p_{n-1}(t)=1\)</span>, as expected. The system will be available if it is in the first box, and the probability of being in that state is <span class="math inline">\(p_{n}\)</span>. Given a time interval <span class="math inline">\(T_0\)</span>, we can calculate the fraction of the time the system will be available as follows: <span class="math display">\[\begin{eqnarray}
A(T_0)&amp;=&amp;\frac{1}{T_0}\int_0^{T_0} d\tau p_n(\tau)
\nonumber\\
  &amp;=&amp;\frac{1}{T_0(1+\frac{n \lambda_s}{\mu_s})}\int_0^{T_0} d\tau \left(1+\frac{n \lambda_s}{\mu_s} e^{-(n \lambda_s+\mu_s)\tau}\right)\nonumber\\
  &amp;\simeq&amp;\frac{1}{1+\frac{n \lambda_s}{\mu_s}}\simeq1-\frac{n \lambda_s}{\mu_s}(\#eq:a0)
\end{eqnarray}\]</span> which can also be transformed to <span class="math inline">\(\frac{{\rm MTTF}/n}{{\rm MTTR}+{\rm MTTF}/n }\)</span>, if we convert the rates <span class="math inline">\(\lambda_s\)</span> and <span class="math inline">\(\mu_s\)</span> to time frames <span class="math inline">\(1/{\rm MTTF}\)</span> and <span class="math inline">\(1/{\rm MTTR}\)</span>, respectively. This reproduces the standard availability equation.</p>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="insidetitle" style="margin-top:-10px;">
Availability with one redundancy
</div>
<div class="flexbox">
<div id="plotref_markovoneredundancya" class="imgcont" style="display:block;display: inline-block;width:31%;margin-top:-2px;margin-bottom:2px;margin-left:-5px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovoneredundancya-1.png" alt="\label{fig:markovoneredundancya} Markov Chain with one redundancy." width="0.7\linewidth" />
<p class="caption">
 Markov Chain with one redundancy.
</p>
</div>
</div>
<div style="display:block;display: inline-block;width:78%;margin-top:-2px;margin-bottom:2px">
<ul>
<li class="fragment">
With one redundancy, the data will be unavailable if <span class="math inline">\(2^+\)</span> systems are down.
</li>
<li class="fragment">
Such a system can be modeled with the Markov chain shown on the left.
</li>
<li class="fragment">
<p style="display:inline-block;">
The availability can be computed as
</p>
<div style="display:inline-block;width:10%;height:60px;margin-top: -80px;">
<p><span class="math display">\[\begin{equation}
A_1=1-\left[n\frac{\lambda_s}{\mu_s}\right]\left[(n-1)\frac{\lambda_s}{\mu_s}\right](\#eq:a1pre)
\end{equation}\]</span></p>
</div>
</li>
</ul>
</div>
</div>
<div class="collapsible_container fragment">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:10px">
Show a rigorous proof
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-34px;margin-bottom:-2px">
Hide
</button>
<div class="experience__more sourceCode r" style=";margin-top:3px;">
The state equation in the <span class="math inline">\(s\)</span>-domain is: <span class="math display">\[\begin{equation}
  \begin{bmatrix}
    P_{n}(s)   \\
   P_{n-1}(s)\\
   P_{n-2}(s)
  \end{bmatrix}=\mathcal{S}_1^{-1} \begin{bmatrix}
    1  \\
  0\\
  0
  \end{bmatrix},
  (\#eq:avfull)
\end{equation}\]</span> where we defined <span class="math inline">\(\mathcal{S}_1\)</span> as <span class="math display">\[\begin{equation}
 \mathcal{S}_1=\begin{bmatrix}
    s +n \lambda_s &amp; -\mu_s &amp; 0 \\
        -n\lambda_s &amp; s +(n-1)\lambda_s +\mu_s &amp;\color{red}{-\mu_s}\\
    0 &amp;-(n-1)\lambda_s &amp; s+\color{red}{\mu_s}
  \end{bmatrix}.
    (\#eq:smatrixav2)
\end{equation}\]</span> The terms in red show the additional terms compared to reliability analysis. Inverting the matrix and grabbing <span class="math inline">\(P_{n-2}\)</span>, we get <span class="math display">\[\begin{equation}
\frac{s^{-1}\lambda_s^2n (n-1)}{\mu_s^2-\lambda_s^2 n + \lambda_s \mu_s n  + \lambda_s^2 n^2  -
[\lambda_s  + 2 \mu_s  + 2 \lambda_s n ]s + s^2}.
 (\#eq:av1)
\end{equation}\]</span> We can expand <span class="math inline">\(P_{n-2}(s)\)</span> in partial fractions, and there will be <span class="math inline">\(3\)</span> poles: <span class="math inline">\(s_1=0\)</span>, <span class="math inline">\(s_{2,3}=\mu_s \pm \frac{1}{2} \lambda_s(n-1) + \sqrt{\lambda_s^2 +4 \mu_s\lambda_s (n-1)}\)</span>. Note that the poles <span class="math inline">\(s_{2,3}\)</span> will result in exponential functions <span class="math inline">\(e^{-\mu_s t}\)</span> decaying very fast, so we can just ignore them. So all we need is the coefficient of the pole at <span class="math inline">\(s=0\)</span>, let’s call it <span class="math inline">\(c_0\)</span>, which is easy to calculate: <span class="math display">\[\begin{eqnarray}
C_0&amp;=&amp;\lim_{s\xrightarrow{} 0} s P_{n-2}(s)=\frac{\lambda_s^2n (n-1)}{\mu_s^2 + \lambda_s \mu_s n  + \lambda_s^2 n(n-1)  }\nonumber\\
&amp;\simeq&amp; n(n-1)\frac{\lambda_s^2}{\mu_s^2}.
 (\#eq:coef)
\end{eqnarray}\]</span> Therefore the availability for a system with one redundancy is <span class="math display">\[\begin{eqnarray}
A_1&amp;=&amp;1-p_{n-2}(t)\simeq 1-C_0=1-n(n-1)\frac{\lambda_s^2}{\mu_s^2}\nonumber\\
&amp;=&amp;1-\left[n\frac{\lambda_s}{\mu_s}\right]\left[(n-1)\frac{\lambda_s}{\mu_s}\right],(\#eq:a1)
\end{eqnarray}\]</span> where we factored out the subtracted term to highlight a pattern. As an extra redundancy is added, the subtracted term is suppressed by a factor of <span class="math inline">\(\frac{\lambda_s}{\mu_s}\)</span>.
<div class="my_vspacer">

</div>
<div class="my_vspacer">

</div>
<div class="my_vspacer">

</div>
</div>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="insidetitle" style="margin-top:-10px;">
Availability with <span class="math inline">\(c\)</span> redundancies
</div>
<div class="flexbox">
<div id="plotref_markovcredundancya" class="imgcont" style="display:block;display: inline-block;width:31%;margin-top:-2px;margin-bottom:2px;margin-left:-5px">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/markovcredundancya-1.png" alt="\label{fig:markovoneredundancya} Markov Chain with $c$ redundancies." width="0.7\linewidth" />
<p class="caption">
 Markov Chain with <span class="math inline">\(c\)</span> redundancies.
</p>
</div>
</div>
<div style="display:block;display: inline-block;width:75%;margin-top:-2px;margin-bottom:2px;;margin-left:15px">
<p>Recognizing the patterns in Eqs. <span class="myeqref"> @ref(eq:a0pre) </span> and <span class="myeqref"> @ref(eq:a1pre)</span> we can generalize the formula to a system with <span class="math inline">\(c\)</span> redundancies: <span class="math display">\[\begin{equation}
A_c\simeq 1-\frac{n !}{(n-c-1)!}\left[\frac{\lambda_s}{\mu_s}\right]^{c+1}
(\#eq:avgc)
\end{equation}\]</span></p>
</div>
</div>
</div>
<!--chapter:end:System_Availability.Rmd--></section>
<section><section id="appendix" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation_dividerpage" data-background="sg_bg.png" data-state="genericbg"><h1>Appendix</h1><div class="myclassifier_Presentation pbox" style="text-align:center">
Here we look at the data durability with dual actuator.
<div class="my_vspacersmall">

</div>
<p><font color="orange"> Press down arrow to navigate this sections.</font></p>
</div></section><section id="machslide" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png" data-state="genericbg">
<h2>Durability with Mach2</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="collapsible_container">
<button type="button" class="btn--more js--btn-more is--visible" style="margin-bottom:10px">
Show the GIF
</button>
<button type="button" class="btn--more js--btn-less" style="margin-top:-34px">
Hide
</button>
<div class="experience__more" style=";margin-top:-1px;">
<div id="mach2gif">
<IMG SRC="mach2.gif"   class="plain">
<div style="margin-top:-6px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="A mock up MACH2 drive with two actuators." width="0.01%" />
<p class="caption">
A mock up MACH2 drive with two actuators.
</p>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">
The reliability of RAID critically depends on the speed of the recovery.
</li>
<li class="fragment">
MACH2 doubles the data transfer <span class="math inline">\(\implies\)</span> <strong>2x/4x</strong> reliability improvement for RAID5/6.
</li>
</ul>
</div>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">

<div class="myclassifier_Highlights_Detailed_Advanced_Presentation">
<div class="boxer">
<div style="display: inline-block;width:40%;margin-left:5%;">
<div id="slider-dualact_afr" class="regular-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
<span class="math inline">\(\rm{AFR}(\%)\)</span>
</div>
</div>
<div style="display: inline-block;width:40%;">
<div id="slider-dualact_rec_time" class="regular-slider" style="margin-right: 1em">

</div>
<div class="slider_label">
<span class="math inline">\(\text{Recovery time(hours)}\)</span>
</div>
</div>
<div style="width:100%;
  margin-left:auto;
  margin-right:auto;">
<div id="machraid" style="margin-top: 1px;margin-left:auto;margin-right:auto;">

</div>
</div>
</div>
<div style="margin-top:-4px">
<div class="figure" style="text-align: center">
<img src="placeholder.png" alt="An interactive plot showing the gains with MACH2. &lt;span class='plus'&gt;... [+]&lt;/span&gt; &lt;span class='expanded-caption'&gt; Dual actuator drives deliver 2X gain in data rate, which reduces the recovery time by $50\%$. This results in 2x/4x gain in dirability for RAID5/6.&lt;/span&gt;" width="0.01%" />
<p class="caption">
An interactive plot showing the gains with MACH2. <span class="plus">… [+]</span> <span class="expanded-caption"> Dual actuator drives deliver 2X gain in data rate, which reduces the recovery time by <span class="math inline">\(50\%\)</span>. This results in 2x/4x gain in dirability for RAID5/6.</span>
</p>
</div>
</div>
</div>
</section><section id="remandur" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation_dividerpage" data-background="sg_bg.png" data-state="genericbg">
<h2>Durability with ReMAN</h2>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
Consider with the simplest case<span class="citation" data-cites="olmez">[<a href="#/ref-olmez" role="doc-biblioref">14</a>]</span>: one redundancy. Given a head/drive failure, there are two paths to losing data:
<ul>
<li class="fragment">
<font color="gray">A second failure while recovering from a head failure: less likely due to faster recovery.
</li>
</font>
<li class="fragment">
<font color="gray">A second failure while recovering from a drive failure: more likely due to longer recovery.
</li>
</font>
</ul>
</li>
</ul>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<div class="flexbox">
<div class="imgcont" style="display:block;display: inline-block;width:40%;margin-top:-5px;">
<div class="figure" style="text-align: center">
<img src="presentation_files/figure-revealjs/remanonered-1.svg" alt="Markov chain split into two parallel paths: recovery from subcomponent failures and recovery from device failures." width="432" />
<p class="caption">
Markov chain split into two parallel paths: recovery from subcomponent failures and recovery from device failures.
</p>
</div>
</div>
<div style="display:block;display: margin-top:15px;">
<ul class="fragment" style=";margin-left:-12px">
<li>
The plot on the left shows two parallel Markov chains:
<ul>
<li class="fragment">
<font color="gray">Left-most shows data recovery for a ReMan’able failure.
</li>
</font>
<li class="fragment">
<font color="gray">Right-most shows the standard recovery when a drive fails.
</li>
</font>
</ul>
</li>
<li class="fragment">
<span class="math inline">\(r_m\)</span> term represents the maximally ReMan’ed drive population.
<ul>
<li class="fragment">
<font color="gray">ReMan’able failures on maximal drives trigger replacement.
</li>
</font>
<li class="fragment">
<font color="gray">This is represented by the dashed red curves.
</li>
</font>
</ul>
</li>
<li class="fragment">
The transition rates are time dependent, and involve <span class="math inline">\(r_m\)</span> functions.
</li>
</ul>
</div>
</div>
<ul class="fragment">
<li>
<span class="math inline">\(\mathcal{R}^{(1)}_1(t)=exp\Big(-\frac{\mathcal{C}}{2 \Gamma}\left[t+\frac{1-e^{-2 \lambda_\mathrm{R} t}}{2 \lambda_\mathrm{R}}\right]-\frac{\mathcal{C}}{2\mu}\left[ (1+2 \kappa)t-\frac{1-e^{-2 \lambda_\mathrm{R} t}}{2\lambda_\mathrm{R}}\right]\Big)\)</span> where <span class="math inline">\(\mathcal{C}\equiv n^2\lambda^2_{\mathrm{R}}(1+\kappa)\)</span>, and <span class="math inline">\(\kappa\equiv\frac{\lambda_\mathrm{NR}}{\lambda_\mathrm{R}}\)</span>
<ul>
<li class="fragment">
<font color="gray"><span class="math inline">\(n:\)</span> number of drives in the EC scheme, <span class="math inline">\(N:\)</span> number of heads per drive,
</li>
</font>
<li class="fragment">
<font color="gray"><span class="math inline">\(\Gamma:\)</span> ReMan Repair rate, <span class="math inline">\(\mu:\)</span> drive repair rate, <span class="math inline">\(\lambda_R\)</span>: ReMan’able failure rate, <span class="math inline">\(\lambda_{NR}\)</span>: non-ReMan’able failure rate.
</li>
</font>
</ul>
</li>
<li class="fragment">
This is the expression when we allow for 1 ReMan/drive. Similar formulas are calculated for <span class="math inline">\(R_{max}=2,3\)</span>.
</li>
</ul>
</div>
<div class="myclassifier_Highlights_Detailed_Advanced_Presentation fragment pbox">
<ul>
<li>
We have an analytical model of Erasure Coded systems that support ReMan.
</li>
<li class="fragment">
The closed mathematical form can be computed instantly enabling a real-time web application.
</li>
</ul>
</div>
</section><section id="remandursim" class="slide level2 myclassifier_Highlights_Detailed_Advanced_Presentation_dividerpage" data-background="sg_bg.png" data-state="genericbg">
<h2>Simulation with online ReMan</h2>
<div class="fragment pbox">
<ul>
<li>Below is a comparison of Monte Carlo Simulation and theoretical results:
<ul>
<li>ReMan’able AFR= 8% and non ReMan’able AFR=2%.</li>
<li>Note that AFRs are take unrealistically high to show the functional behavior.</li>
<li>Assuming 1-ReMan per drive is allowed.</li>
</ul></li>
<li>The plot shows the theoretical prediction is remarkably accurate.
<ul>
<li>The gain in durability coming from ReMan is about 4x.</li>
</ul></li>
</ul>
</div>
<div class="pbox fragment">
<div style=";margin-top:-0px;margin-left:20%">
<div id="htmlwidget-a25604aedb985e4c4825" style="width:864px;height:336px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a25604aedb985e4c4825">{"x":{"visdat":{"145d444772cac":["function () ","plotlyVisDat"]},"cur_data":"145d444772cac","attrs":{"145d444772cac":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"mode":"markers","name":"Number of nines_MC","inherit":true},"145d444772cac.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"mode":"line","line":{"width":5},"name":"Number of Nines_theory","inherit":true},"145d444772cac.2":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"mode":"line","line":{"width":5},"name":"Number of Nines_No Reman","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"titlefont":{"size":25},"tickfont":{"size":25},"title":"Time(year)","hoverformat":".1f"},"yaxis":{"domain":[0,1],"automargin":true,"titlefont":{"size":25},"tickfont":{"size":25},"title":"Number of nines","hoverformat":".1f"},"legend":{"font":{"family":"sans-serif","size":20,"color":"#000"},"bgcolor":"#E2E2E2","bordercolor":"#FFFFFF","borderwidth":2,"x":0.4,"y":1,"size":20},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[0.5,1,1.5,2,2.5,3,3.5,4,4.5,5],"y":[2.537602,2.34678749,2.11350927,2.03151705,1.96657624,1.79317412,1.74958,1.70553377,1.66154351,1.63264408],"mode":"markers","name":"Number of nines_MC","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5,1,1.5,2,2.5,3,3.5,4,4.5,5],"y":[2.6015906,2.30391718,2.13104247,2.00918734,1.91523474,1.83889113,1.77466833,1.71929254,1.67065388,1.62731323],"mode":"line+lines","line":{"color":"rgba(255,127,14,1)","width":5},"name":"Number of Nines_theory","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5,1,1.5,2,2.5,3,3.5,4,4.5,5],"y":[2.04139569,1.74234425,1.56822852,1.4452623,1.35032178,1.27310702,1.20812369,1.15209219,1.10289709,1.05909401],"mode":"line+lines","line":{"color":"rgba(44,160,44,1)","width":5},"name":"Number of Nines_No Reman","type":"scatter","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<div style=";margin-left:-12px;font-size: 16px">
Number of nines with <span class="math inline">\(\lambda_\mathrm{R}=1/12\)</span> and <span class="math inline">\(\lambda_\mathrm{NR}=1/50\)</span> (1/year), which correspond to <span class="math inline">\(8\%\)</span> and <span class="math inline">\(2\%\)</span> AFR respectively.
</div>
</div>
</div>
<script>
function machdraw(divid) {
var machraid_default_state=[0,0,0,0]
var machraid_traces=document.getElementById('machraid').getElementsByClassName("traces")
if(machraid_traces.length>0){
  for (i = 0; i < machraid_traces.length;i++)
  {if(machraid_traces[i].style.opacity<1){ machraid_default_state[i]=1}else{machraid_default_state[i]=0}} 
} 



mafr=dualact_afrSlider.noUiSlider.get() 
rect=dualact_rec_timeSlider.noUiSlider.get() 
    const rdata = []
   
 const xValues = math.range(4, 26, 1).toArray()
 var mu=1/rect
 var lambda= mafr/(8766*100)
 const yValuesone = xValues.map(x =>10*math.round(1/(x*(x-1))*mu/math.pow(lambda,2)/8766/10))
 const yValuestwo = xValues.map(x =>10*math.round(1/(x*(x-1))*2*mu/math.pow(lambda,2)/8766/10))
 const yValuesthree= xValues.map(x =>1000*math.round(1/(x*(x-1)*(x-2))*math.pow(mu,2)/math.pow(lambda,3)/8766/1000))
 const yValuesfour= xValues.map(x =>1000*math.round(1/(x*(x-1)*(x-2))*math.pow(2*mu,2)/math.pow(lambda,3)/8766/1000))
 let trace1 = {x: xValues,y: yValuesone,mode: "markers+lines" , type: 'scatter',name: "RAID5",visible:statemap[ machraid_default_state[0]]};
 let trace2 = {x: xValues,y: yValuestwo,mode: "markers+lines" , type: 'scatter',name: "RAID5+MACH2",visible: statemap[ machraid_default_state[1]]};
 let trace3 = {x: xValues,y: yValuesthree,mode: "markers+lines" , type: 'scatter',name:"RAID6",visible: statemap[ machraid_default_state[2]]};
 let trace4 = {x: xValues,y: yValuesfour,mode: "markers+lines" , type: 'scatter',name:"RAID6+MACH2",visible: statemap[ machraid_default_state[3]]};

 rdata.push(trace1);   rdata.push(trace2);rdata.push(trace3);rdata.push(trace4)
   var rlayout = {

         title: {
    text:'MTTDL for RAID5&6 with and without Dual Actuator ('.concat('AFR=',math.round(10*mafr)/10, '%, recovery time=',math.round(rect), ' hours)'),
    font: {
      size: 16
    },
    xref: 'paper',
    x: 0.2,
        yref: 'paper',
    y: 1
  },
   legend: {
       x: 0.75,
       y: 1.0,
       traceorder: 'normal',
       font: {
         family: 'sans-serif',
         size: 12,
         color: '#000'
       },
       bgcolor: '#E2E2E2',
       bordercolor: '#FFFFFF',
       borderwidth: 2
     },
       xaxis: {
       title: 'number of drives (n)',
       showgrid: true,
       zeroline: false
     },
     yaxis: {
       type: 'log',
       title: 'MTTDL(years)',
       //hoverformat: '.1r',
       showline: true
     },
    margin: {    l: 165,    r: 50,    b: 40,    t: 40,    pad: 1  }


   };
        var defaultPlotlyConfiguration = { modeBarButtonsToRemove: ['sendDataToCloud', 'autoScale2d', 'hoverClosestCartesian', 'hoverCompareCartesian', 'lasso2d', 'select2d'], displaylogo: false, showTips: true };
   
   Plotly.newPlot('machraid', rdata,rlayout,defaultPlotlyConfiguration);
 }
</script>
<script>
var dualact_afrSlider = document.getElementById('slider-dualact_afr');
noUiSlider.create(dualact_afrSlider, {
  start: [1.0], margin: 0.1,tooltips: [wNumb({decimals: 1})], step:0.1,range: {min: 0.1, max: 5}
})

var dualact_rec_timeSlider = document.getElementById('slider-dualact_rec_time');
noUiSlider.create(dualact_rec_timeSlider, {
  start: [48], margin: 5,tooltips: [wNumb({decimals: 0})],step: 1,range: {min: 10, max: 240}
})




dualact_afrSlider.noUiSlider.on('update', function( values, handle ) { machdraw('machraid')});
dualact_rec_timeSlider.noUiSlider.on('update', function( values, handle ) { machdraw('machraid')});




</script>
<!--chapter:end:appendix.RmD-->
</section></section>
<section id="references" class="title-slide slide level1 myclassifier_Highlights_Detailed_Advanced_Presentation" data-background="sg_bg.png"><h1>References</h1><div class="myclassifier_Highlights_Detailed_Advanced_Presentation">

</div>
<!--chapter:end:references.Rmd-->
<div id="refs" class="references" role="doc-bibliography">
<div id="ref-xie2015">
<p>[1] Y. Xie, <em>Dynamic documents with R and knitr</em>, 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC, 2015 [Online]. Available: <a href="http://yihui.name/knitr/">http://yihui.name/knitr/</a></p>
</div>
<div id="ref-revealjs">
<p>[2] Hakim El Hattab, <em>Revealjs</em>. 2020 [Online]. Available: <a href="https://revealjs.com/">https://revealjs.com/</a></p>
</div>
<div id="ref-raid">
<p>[3] D. A. Patterson, G. Gibson, and R. H. Katz, “A case for redundant arrays of inexpensive disks (raid),” <em>SIGMOD Rec.</em>, vol. 17, no. 3, pp. 109–116, Jun. 1988, doi: <a href="https://doi.org/10.1145/971701.50214">10.1145/971701.50214</a>. [Online]. Available: <a href="https://doi.org/10.1145/971701.50214">https://doi.org/10.1145/971701.50214</a></p>
</div>
<div id="ref-Hellerstein1994">
<p>[4] L. Hellerstein, G. A. Gibson, R. M. Karp, R. H. Katz, and D. A. Patterson, “Coding techniques for handling failures in large disk arrays,” <em>Algorithmica</em>, vol. 12, no. 2, pp. 182–208, Sep. 1994, doi: <a href="https://doi.org/10.1007/BF01185210">10.1007/BF01185210</a>. [Online]. Available: <a href="https://doi.org/10.1007/BF01185210">https://doi.org/10.1007/BF01185210</a></p>
</div>
<div id="ref-Dimakis">
<p>[5] A. G. Dimakis, P. B. Godfrey, Y. Wu, M. J. Wainwright, and K. Ramchandran, “Network coding for distributed storage systems,” <em>IEEE Trans. Inf. Theor.</em>, vol. 56, no. 9, pp. 4539–4551, Sep. 2010, doi: <a href="https://doi.org/10.1109/TIT.2010.2054295">10.1109/TIT.2010.2054295</a>. [Online]. Available: <a href="https://doi.org/10.1109/TIT.2010.2054295">https://doi.org/10.1109/TIT.2010.2054295</a></p>
</div>
<div id="ref-Wang">
<p>[6] G. Wang, L. Xiao-Guang, and L. Jing, “Parity declustering data layout for tolerating dependent disk failures in network raid systems,” 2002, pp. 22–25, doi: <a href="https://doi.org/10.1109/ICAPP.2002.1173547">10.1109/ICAPP.2002.1173547</a>. </p>
</div>
<div id="ref-Iliadis">
<p>[7] V. Venkatesan and I. Iliadis, “Effect of codeword placement on the reliability of erasure coded data storage systems,” in <em>Quantitative evaluation of systems</em>, 2013, pp. 241–257. </p>
</div>
<div id="ref-Thomasian">
<p>[8] A. Thomasian and M. Blaum, “Higher reliability redundant disk arrays: Organization, operation, and coding,” <em>ACM Trans. Storage</em>, vol. 5, no. 3, Nov. 2009, doi: <a href="https://doi.org/10.1145/1629075.1629076">10.1145/1629075.1629076</a>. [Online]. Available: <a href="https://doi.org/10.1145/1629075.1629076">https://doi.org/10.1145/1629075.1629076</a></p>
</div>
<div id="ref-draid">
<p>[9] T. Kawaguchi, “Reliability analysis of distributed raid with priority rebuilding,” 2013. </p>
</div>
<div id="ref-Padgett">
<p>[10] W. Padgett, “Weibull distribution,” 2011, pp. 1651–1653. </p>
</div>
<div id="ref-BBreli">
<p>[11] B. Wilson, “Cloud storage durability,” 2018 [Online]. Available: <a href="https://www.backblaze.com/blog/cloud-storage-durability/">https://www.backblaze.com/blog/cloud-storage-durability/</a></p>
</div>
<div id="ref-BBcode">
<p>[12] B. Beach, “Python code to calculate the durability of data stored with erasure coding,” 2018 [Online]. Available: <a href="https://github.com/Backblaze/erasure-coding-durability/">https://github.com/Backblaze/erasure-coding-durability/</a></p>
</div>
<div id="ref-uerIliadis">
<p>[13] I. Iliadis, R. Haas, X.-Y. Hu, and E. Eleftheriou, “Disk scrubbing versus intra-disk redundancy for high-reliability raid storage systems,” vol. 36, no. 1, pp. 241–252, Jun. 2008, doi: <a href="https://doi.org/10.1145/1384529.1375485">10.1145/1384529.1375485</a>. [Online]. Available: <a href="https://doi.org/10.1145/1384529.1375485">https://doi.org/10.1145/1384529.1375485</a></p>
</div>
<div id="ref-olmez">
<p>[14] S. Olmez, “Reliability analysis of storage systems with partially repairable devices,” 2021 [Online]. Available: <a href="Under%20peer%20review,%20available%20up%20on%20request">Under peer review, available up on request</a></p>
</div>
</div></section>
    </div>
  </div>

  <script src="presentation_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="presentation_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'convex', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom
        // Bounds for smallest/largest possible scale to apply to content
        minScale: 1,
        maxScale: 1,



        // Optional reveal.js plugins
        dependencies: [
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>

<script>
var fignum=0
var allcaptions=$(".caption")
for(let i = 0; i < allcaptions.length; i++) {
  fignum=fignum+1
  var newFirstElement=document.createElement("SPAN"); //element which should be first in E
  newFirstElement.innerText="Figure "+fignum+":"
  newFirstElement.id="figure"+fignum
  newFirstElement.className="figurenum"
  allcaptions[i].insertBefore(newFirstElement, allcaptions[i].firstChild);
 // try {console.log(allcaptions[i].parentNode.parentNode.id)}catch(err) {}
//try {console.log(fignum+":"+allcaptions[i].parentNode.parentNode.className)}catch(err) {}
  
}




 var allclassified=$(".slides").find('[class*="myclassifier_"]')
 // alert(allclassified.length)
  for(let i = 0; i < allclassified.length; i++) {
   var thisclass=allclassified[i].getAttribute('class')
  if(thisclass.includes("Presentation")){
        if(thisclass.includes("inline")){allclassified[i].style.display = 'inline-block'}else{allclassified[i].style.display = 'block'} 


  }else{
    //
    allclassified[i].remove()
    
  }
  }

</script>

<script>
var all_clicks = document.getElementsByClassName("tobeclicked");
//console.log("#of to be clicked:"+all_clicks.length)
for (var i = 0; i < all_clicks.length; i++) { 
all_clicks[i].click()
}
</script>

<script>
//console.log("m_button_click")
$(".m_button").click(function() {
  $('body').toggleClass("m_active");
 
//  if ( $('#infotext').css('visibility') == 'hidden' ){
//  $('#infotext').css('visibility','visible');
//  }
//else{
//  $('#infotext').css('visibility','hidden');
//}
    document.getElementById("infotext").classList.toggle('fade');

  
});
</script>



<script>
//try {}catch(err) {}
//console.log("modifiying_eqrefs")
var matheqrefs=document.querySelectorAll(`[class*="myeqref"]`);


for (var i = 0; i < matheqrefs.length; i++) { 

	//alert(matheqs[0].innerHTML)
	var innerh=matheqrefs[i].innerHTML
	const regex = /@ref\(eq:.*\)/gi;
	const regexL = /@ref\(eq:/gi;
	var matcheds=innerh.match(regex).toString()
	matcheds=matcheds.replace(regexL,"\\eqref{eq:").replace(")","}")
// $\eqref{eq:nftlast}$
	 matheqrefs[i].innerHTML=innerh.replace(regex, matcheds)
//	matheqrefs[i].innerHTML=innerh.replace(regex, "YELLO")
}


</script>


<script>
//console.log("reveal_init")
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        width: '80%',
        height: '100%',
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'convex', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

      ///https://github.com/denehyg/reveal.js-menu
        menu: {
          custom: false,
          themes: false,
          transitions: true,
             keyboard: true
        },



        // Optional reveal.js plugins
        dependencies: [
          { src: 'jsfiles/reveal.js-3.3.0.1/plugin/notes/notes.js', async: true },
          { src: 'jsfiles/reveal.js-3.3.0.1/plugin/search/search.js', async: true },
          { src: 'jsfiles/reveal.js-3.3.0.1/plugin/zoom-js/zoom.js', async: true },
          { src: 'jsfiles/reveal.js-3.3.0.1/plugin/menu/menu.js', async: true },
          { src: 'jsfiles/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true }
        ]
      });
</script>




<script>
//console.log("modify_math_eq_labels")
var matheqs=document.getElementsByClassName('math display')
//console.log(matheqs.length)
//console.clear()
for (var i = 0; i < matheqs.length; i++) { 
try {
 	//alert(matheqs[0].innerHTML)
	var innerh=matheqs[i].innerHTML
	//const regex = /\(\\#eq:/gi;
	const regex = /\(\\#eq:.*\)/gi;
	const regexL = /\(\\#eq:/gi;
	var matcheds=innerh.match(regex).toString()
	var marr=matcheds.split(',')
//	console.log(marr)
	for (var j = 0; j < marr.length; j++) { 
	var matcheds=marr[j].replace(regexL,"\\label{eq:").replace(")","}")
	//\label{eq:nftlast}
	//alert(matcheds)
	//(\#eq:nftlast)
	//console.log(marr[j])
	innerh=innerh.replace(marr[j], matcheds)
	
	}
	matheqs[i].innerHTML=innerh 
  
}catch(err) {}

	//var mycontent = document.createElement("div");
 // if(i==0){
 // mycontent.id = "mjx-eqn-eqweipdfi"
  //matheqs[i].appendChild(mycontent);
  //}
	//matheqs[i].innerHTML=innerh.replace(regex, "")
}

</script>





<script> 
//console.log("remove_placeholder_images")

 var placehoders=$(".figure").find('[src*="placeholder.png"]')
 //alert(placehoders.length)
 for (var i = 0; i < placehoders.length; i++) { 
 
   placehoders[i].style.opacity=0
   placehoders[i].style.width=0
 }
   
 //document.querySelector("script[src='placeholder.png']")[0].style.display='none'
</script>






<script>

window.addEventListener('resize', function(event) {
        var plots = [...document.getElementsByClassName('js-plotly-plot')];
        plots.forEach((plt) => {
            var width = Reveal.getScale() * parseInt(plt.getAttribute('data-target-width'));
            var height = Reveal.getScale() * parseInt(plt.getAttribute('data-target-height'));
            plt.style.width = width + 'px';
            plt.style.height = height + 'px';
            Plotly.Plots.resize(plt);
            plt.style.transform = 'scale(' + 1 / Reveal.getScale() + ')';
           // plt.style.webkit-transform = 'scale(' + 1 / Reveal.getScale() + ')'
            
            
        });
});
</script>
 

  
  







<script>
setTimeout(function(){ 
 //console.log("top_of_time_out")

 document.getElementsByClassName('date')[0].appendChild(document.getElementById("acknowledgementtext"))
 document.getElementsByClassName('date')[0].appendChild(document.getElementById("infotextcont"))  
document.getElementsByClassName('author')[0].appendChild(document.getElementById("emailtext"))  

 //document.getElementById("bbmodel").getElementsByTagName("h2")[0].appendChild(document.getElementById("bblogo"))

 var mydiv = document.getElementsByClassName('title')[0];
var mycontent = document.createElement("span");
mycontent.innerHTML = "&nbsp;  <div class='regulartooltip topline'> <a href='#' onclick='window.open(\x22https://www.youtube.com/watch?v=gsp4fUP0I30\x22);return false;'><i class='fab fa-youtube' style='color:red;height:60px'></i></a> <span class='regulartooltiptext'> YouTube link to the recorded session. </span></div>  ";
mycontent.className = 'prego';
mydiv.appendChild(mycontent);
 


 //console.log("click on m_button")

document.getElementsByClassName("m_button")[0].click()
 
//console.log("event_listeners")

try {addClassNameListener("introslide", function(){if(document.getElementById("introslide").className.includes("present")){
  //console.log("introslide_visible")
  
}});}catch(err) {}
try{addClassNameListener("appendix", function(){if(document.getElementById("appendix").className.includes("present")){
  //console.log("appendix_visible")
  
}});}catch(err) {}
try {addClassNameListener("machslide", function(){if(document.getElementById("machslide").className.includes("present")){
  //console.log("machslide_visible")
  ;machdraw('machraid')}});}catch(err) {}



try {addClassNameListener("wvisualslide", function(){if(document.getElementById("wvisualslide").className.includes("present")){
  //console.log("wvisualslide_visible")
  ;w_pdf_cdf_plotter()}});}catch(err) {}


try {addClassNameListener("raiduerslide", function(){
if(document.getElementById("raiduerslide").className.includes("present")){
//console.log("raiduerslide_visible")
raiddraw(1,'myraid')
//try {	if(plotted==0){plotted=1;raiddraw(1,'myraid')}}catch(err) {raiddraw(1,'myraid')}

}

});
}catch(err) {}

try {addClassNameListener("damageslide", function(){
if(document.getElementById("damageslide").className.includes("present")){
//alert("damageslide_visible");
//console.log("damageslide_visible")
drawChart()
//try {	if(plotted==0){plotted=1;raiddraw(1,'myraid')}}catch(err) {raiddraw(1,'myraid')}

}

});
}catch(err) {}


try {addClassNameListener("adaptslide", function(){
if(document.getElementById("adaptslide").className.includes("present")){
//alert("adaptslide_visible");
//console.log("adaptslide_visible")
//drawvenn()
//try {	if(plotted==0){plotted=1;raiddraw(1,'myraid')}}catch(err) {raiddraw(1,'myraid')}

}

});}catch(err) {}






//console.log("event_listeners end")




//console.log("event_listener cap_expander")

var elements = document.getElementsByClassName("plus");
for (var i = 0; i < elements.length; i++) { elements[i].addEventListener('click', cap_expander, false);}


//console.log("set transition to slide")

document.getElementsByClassName("slide-menu-items")[1].getElementsByTagName("li")[2].click() // this will set the transitions to slide. [Setting it up from initial config didn't work]

// if there is a equation ref in a div and the div is hidden, MathJax skips it? I guess. Make it visible [class=fragmentz] initially. Afte MJ does its work, flip it
var allfragments=$(".slides").find('[class*="fragment"]')
for(let i = 0; i < allfragments.length; i++) { allfragments[i].classList.replace('fragmentz','fragment'); } 



//alert("hey")
//for(let i = 0; i < allvis.length; i++) { allvis[i].classList.replace('experience__more_vis','experience__more'); } 

//.experience__more {display: none;}


//ADDING TOOLTIP to eqrefs
//console.log("ADDING TOOLTIP to eqrefs")
var tooltipindex=0
$('.myeqref').each(function() {
   /// console.log($(this).attr('href'));
try {
 var thishref=$(this).find("script")[0].innerText.replace('\\eqref{','').replace('}','').replace(':','')
 thishref="mjx-eqn-"+thishref
 //console.log(thishref)
 var closestmjd=document.getElementById(thishref).closest('.MathJax_Display')
 var mathedeq=closestmjd.nextElementSibling.innerHTML
 //console.log(mathedeq)
 var tagloc=mathedeq.indexOf('\\label{')
 //console.log(tagloc)
 if(tagloc>0){
   var textright=mathedeq.substring(tagloc+8, 1000)
   textright=textright.substring(textright.indexOf('}')+1, 1000)
  //console.log(textright)
   mathedeq=mathedeq.substring(0, tagloc)
  
   var lastch=mathedeq.substr(mathedeq.length - 1)
   if(lastch==","|lastch=="."){mathedeq=mathedeq.substring(0, mathedeq.length - 1)}
    mathedeq=mathedeq+textright
 }

 $(this).addClass('mjtooltip');
 var tooltipid="tooltipid"+tooltipindex
  $(this).append(' <span id="'+tooltipid+'" class="mjtooltiptext">$'+mathedeq+'$</span>')
  tooltipindex=tooltipindex+1
  var mjttip=document.getElementById(tooltipid)
   MathJax.Hub.Queue(["Typeset",MathJax.Hub,   mjttip]);
   
}catch(err) {}

   
});


//console.log("ADDING TOOLTIP for citations")

/// TOOLTIP for citations
tooltipid=0
$('a[href*="#/ref-"]').each(function() {

var thishref=$(this).attr('href').replace('#/','').replace('#','') //href="#/ref-Padgett"   id="ref-Padgett"
var citetext=document.getElementById(thishref).innerText
citetext=citetext.substring(citetext.indexOf(']')+1, 1000)
$(this).addClass('citationtooltip');
tooltipindex=tooltipindex+1
 var tooltipid="citationtooltipid"+tooltipindex
  $(this).append(' <span id="'+tooltipid+'" class="citationtooltiptext">'+citetext+'</span>')

  $(this).removeAttr('href')
})

//console.log("surgery_on_eq_refs")

var all_links = document.getElementsByClassName("myeqref"); 
//alert(all_links.length)
for (var i = 0; i < all_links.length; i++) { 
	try {var thiselem=all_links[i].getElementsByTagName("a")[0];
	if(thiselem.getAttribute("href").includes("mjx-eqn-eq")){	thiselem.removeAttribute("href")}
}catch(err) {}

//	MathJax_ref[i].innerHTML=innerh.replace(regex, "YELLO")
}
//console.log("surgery_on_eq_refs done")


//console.log("relocations")
var tobe_relo=$('[id$="_tobe_relo"]')
//tobe_relo.unwrap()
//console.log("tobe_relo:"+tobe_relo.length)

for (i = 0; i < tobe_relo.length; i++) {
 // tobe_relo[i].remove()
 //tobecollapsed[i].outerHTML ='<div class="experience__more" style=";margin-top:10px;margin-bottom:20px;"><button type="button" class="btn--more js--btn-more is--visible" style="margin-top:-10px;margin-bottom:30px">Show details of the solution</button><button type="button" class="btn--more js--btn-less" style="margin-top:-10px;margin-bottom:30px" >Hide </button>'+tobecollapsed[i].outerHTML+'</div>'  
 
   document.getElementById(tobe_relo[i].id.concat('_newlocation')).appendChild( tobe_relo[i] ); 

}

//console.log("fragments")

const checkbox = document.getElementById('fragment_button')

checkbox.addEventListener('change', (event) => {
     //console.log("frags clicked")
    var allfragments=$(".slides").find('[class*="fragment"]')

  if (event.target.checked) {
  
   //console.log("enable frags")
  for(let i = 0; i < allfragments.length; i++) { allfragments[i].classList.replace('fragmentz','fragment');  }
   
  } else {
 //console.log("disable frags")
for(let i = 0; i < allfragments.length; i++) { allfragments[i].classList.replace('fragment','fragmentz');  }  }
})


function choosenk(n, k) {
     if ((typeof n !== 'number') || (typeof k !== 'number')) 
  return false; 
    var coeff = 1;
    for (var x = n-k+1; x <= n; x++) coeff *= x;
    for (x = 1; x <= k; x++) coeff /= x;
    return coeff;
}
function update_fields(){
  $( ".w_rec_time_days" ).each(function() {
     var retfields=w_fields()
  $(this).html(retfields[1].toString());
  }); 
  
    $( ".bb_rec_time" ).each(function() {
     var retfields=w_fields()
  $(this).html(retfields[6].toString());
  }); 
  
    
    $( ".bb_lambda" ).each(function() {
     var retfields=w_fields()
  $(this).html((math.round(1000*retfields[7])/1000).toString()+"/year");
  }); 
  
      $( ".bb_pf" ).each(function() {
     var retfields=w_fields()
  $(this).html((math.round(10000*retfields[7]*retfields[6]/365)/100).toString()+"%");
  }); 
  
  
  
  
    $( ".calc_prob" ).each(function() {
     var retfields=w_fields()
  $(this).html((math.round(1000*retfields[2])/1000).toString()+"%");
  }); 
    
    $( ".w_nredundancyp_text" ).each(function() {
     
  $(this).html(math.round(document.getElementById('w_nredundancy').value)+1)
  }); 
      $( ".bb_nredundancyp_text" ).each(function() {
     
  $(this).html(math.round(document.getElementById('bb_nredundancy').value)+1)
  }); 
  

      $( ".w_nredundancy_text" ).each(function() {
     
  $(this).html(math.round(document.getElementById('w_nredundancy').value))
  }); 
  
      $( ".bb_nredundancy_text" ).each(function() {
     
  $(this).html(math.round(document.getElementById('bb_nredundancy').value))
  }); 
  
        $( ".w_ndrive_text" ).each(function() {
     
  $(this).html(math.round(document.getElementById('w_ndrive').value))
  }); 
  
  
  
  $( ".w_nines_text" ).each(function() {
     var retfields=w_fields()
     
  $(this).html(retfields[4].toString()+" nines")
  }); 
  
  
  $( ".choosenk" ).each(function() {
var options=choosenk(Number(document.getElementById('w_ndrive').value),Number(document.getElementById('w_nredundancy').value)+1)
     
  $(this).html(options)
  }); 
  
    $( ".bb_pnl" ).each(function() {
      
  var retfields=w_fields()
  var bbpf=retfields[6]*retfields[7]/365
 // console.log(bbpf)
  var bb_nredundancy=Number(document.getElementById('bb_nredundancy').value)
  var bb_ndrive=Number(document.getElementById('bb_ndrive').value)
  var totalpf=0
  for(let i = 0; i < bb_nredundancy+1; i++) {
    
    totalpf=totalpf+choosenk(bb_ndrive,i)*math.pow(bbpf,i)*math.pow(1-bbpf,bb_ndrive-i)
   // console.log("i="+i.toString())
  } 
  var totalpass=1-totalpf
  totalpass=math.round(-math.log10(totalpass))
  $(this).html(totalpass.toString()+" nines.")
  }); 
  
  $( ".bb_pnl_year" ).each(function() {
      
          var retfields=w_fields()
  var bbpf=retfields[6]*retfields[7]/365
  var bb_nredundancy=Number(document.getElementById('bb_nredundancy').value)
  var bb_ndrive=Number(document.getElementById('bb_ndrive').value)
  var totalpf=0
  for(let i = 0; i < bb_nredundancy+1; i++) {
    
    totalpf=totalpf+choosenk(bb_ndrive,i)*math.pow(bbpf,i)*math.pow(1-bbpf,bb_ndrive-i)
  } 
  var totalpass=1-totalpf
  totalpass=math.round(-math.log10(totalpass)-math.log10(retfields[8]))
  $(this).html(totalpass.toString()+" nines.")
  }); 
  
  
  
  
  
  
  $( ".w_rec_time_frames" ).each(function() {

          var retfields=w_fields()

  $(this).html(retfields[5])
  }); 
    
  $( ".bb_rec_time_frames" ).each(function() {

          var retfields=w_fields()

  $(this).html(retfields[8])
  }); 
  
    $( ".w_calc_prob" ).each(function() {

          var retfields=w_fields()

  $(this).html(retfields[9])
  }); 
  
  
 
  
  
      $( ".w_overnines" ).each(function() {

          var retfields=w_fields()
          var options=choosenk(Number(document.getElementById('w_ndrive').value),Number(document.getElementById('w_nredundancy').value)+1)

  $(this).html(math.floor(math.log10(retfields[5]*options) ))
  }); 
  
    $( ".bb_overnines" ).each(function() {
var retfields=w_fields()


  $(this).html("~"+retfields[10].toString())
  }); 
  
  
  
  
  
}


    
function w_fields(){
    var w_drivecap = document.getElementById('w_drivecap').value;
    var w_drive_rec_rate = document.getElementById('w_drive_rec_rate').value;
    var w_dafr=document.getElementById('w_dafr').value;
    var w_nredundancy = document.getElementById('w_nredundancy').value;
    var time_days = math.round(10*w_drivecap/w_drive_rec_rate*math.pow(10,6)/(60*60*24))/10
    
    var bb_drivecap = document.getElementById('bb_drivecap').value;
    var bb_drive_rec_rate = document.getElementById('bb_drive_rec_rate').value;
    var bb_dafr=document.getElementById('bb_dafr').value;
     var bb_nredundancy=Number(document.getElementById('bb_nredundancy').value)
    var bb_ndrive=Number(document.getElementById('bb_ndrive').value)
    var bb_time_days = math.round(10*bb_drivecap/bb_drive_rec_rate*math.pow(10,6)/(60*60*24))/10
    var bb_lambda=bb_dafr/100

    var calc_days_text="("+w_drivecap.toString()+" TB)/(" +w_drive_rec_rate.toString()+"MB/s) ="
    var calc_prob=(w_dafr*time_days/365)
//+ time_days.toString()+" days."
    var w_calc_prob_text=w_dafr.toString()+" % * ("+ time_days.toString()+" days/365)="
    var w_calc_prob=(math.round((w_dafr*time_days/365)*1000)/1000).toString()+"%"

    var wnines=math.floor((Number(w_nredundancy)+1)*(-math.log10(calc_prob)+2)) //math.floor((w_nredundancy+1)*(-math.log10(calc_prob)+2))
    var nframes=math.round(365/(w_drivecap/w_drive_rec_rate*math.pow(10,6)/(60*60*24)))
    var bb_rec_time_frames=math.round(365/(bb_drivecap/bb_drive_rec_rate*math.pow(10,6)/(60*60*24)))
    var bb_overnines=math.floor(math.log10( (365/bb_ndrive)*1/(bb_time_days*bb_lambda)    ) )
    
  document.getElementById("w_rec_time_days_with_calc").innerText= calc_days_text
  document.getElementById("w_calc_prob_text").innerText= w_calc_prob_text
  //document.getElementById("w_nredundancyp_text").innerText= w_nredundancy+1
  return [calc_days_text,time_days,calc_prob,w_calc_prob_text,wnines,nframes,bb_time_days,bb_lambda,bb_rec_time_frames,w_calc_prob,bb_overnines]
}

$(".myinputclass").on("change", function(){

  
update_fields()
  


    //w_nredundancy
});



//document.getElementById("w_drivecap_text").innerText=w_drivecap.toString()+" TB"
//document.getElementById("w_drive_rec_rate_text").innerText=w_drive_rec_rate.toString()+" MB/s"
  

//console.log("timed functions end")
try{update_fields()}catch(err) {}
try{w_pdf_cdf_plotter()}catch(err) {}
try{drawChart()}catch(err) {}
try{raiddraw(1,'myraid')}catch(err) {}
try{machdraw('machraid');}catch(err) {}



$(".imgtooltip").hover(function () {
    var elems = this;
    console.log(elems)
    var windowHeight = window.innerHeight;   var windowWidth = window.innerWidth
    console.log("windowWidth,windowHeight:"+windowWidth+","+windowHeight)
    var imgtooltiptexth = 300;
    var imgtooltiptextw = 600;
    var yPos = 4-imgtooltiptexth/2
    var xPos = -imgtooltiptextw/2
 var thistt=$(this).find(".imgtooltiptext")[0]
 
 //console.log(thistt)
 var rect = elems.getBoundingClientRect();
 console.log(rect.top, rect.right, rect.bottom, rect.left);


 var left = rect.left+ window.scrollX
var top = rect.top
console.log("top:"+top+",left:"+left)
var topspace=top-imgtooltiptexth/2
var rightspace=windowWidth-left-imgtooltiptextw
var leftspace=left-imgtooltiptextw
console.log("leftspace:"+leftspace+",rightspace:"+rightspace,",topspace:",topspace)
if (topspace<0)    {
      console.log("zeroth statement")
      yPos =-50
   } 
 if (leftspace<0) 
    {  console.log("first statement")
      xPos = 10

    } 
    if (rightspace<0) 
    {  console.log("second statement")
      xPos = -10-imgtooltiptextw

    }   
    $(thistt).css("top", yPos + "px");
        $(thistt).css("left", xPos + "px");
console.log("xPos,yPos:"+xPos+","+yPos)
    $(thistt).addClass('fade-in').removeClass('fade-out');

},

function () {
   var thistt=$(this).find(".imgtooltiptext")[0]

    $(thistt).addClass('fade-out').removeClass('fade-in');

    
}
)


}, 7000);

</script>


<script src="jsfiles/reveal.js-3.3.0.1/plugin/search/search.js"></script>
<script src="jsfiles/reveal.js-3.3.0.1/plugin/notes/notes.js"></script>
<script src="jsfiles/reveal.js-3.3.0.1/plugin/zoom-js/zoom.js"></script>
<script src="jsfiles/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js"></script>

  </body>
</html>
